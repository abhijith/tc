name: request-async-response

routes:
  post-message:
    gateway: api-test
    kind: http
    timeout: 10
    method: POST
    path: "/api/message"
    function: processor
  get-messages:
    gateway: api-test
    kind: http
    method: GET
    path: "/api/messages"
    function: fetcher

events:
  consumes:
    GetMessages:
      producer: fetcher
      channel: messages

channels:
  messages:
    on_publish:
      handler: default

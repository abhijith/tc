var wo=Object.defineProperty;var Ao=(e,t,n)=>t in e?wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ut=(e,t,n)=>(Ao(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function $e(){}function Wr(e){return e()}function Vn(){return Object.create(null)}function Je(e){e.forEach(Wr)}function Hr(e){return typeof e=="function"}function _o(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function No(e){return Object.keys(e).length===0}function L(e,t){e.appendChild(t)}function ue(e,t,n){e.insertBefore(t,n||null)}function ae(e){e.parentNode&&e.parentNode.removeChild(e)}function Oo(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function Te(e){return document.createTextNode(e)}function ie(){return Te(" ")}function ko(){return Te("")}function $t(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Co(e){return function(t){return t.preventDefault(),e.call(this,t)}}function se(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function xo(e){return Array.from(e.childNodes)}function Kt(e,t){t=""+t,e.data!==t&&(e.data=t)}function nt(e,t){e.value=t??""}let Ke;function Me(e){Ke=e}function Do(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Ro(e){Do().$$.on_mount.push(e)}const Ee=[],jn=[];let Se=[];const Bn=[],Po=Promise.resolve();let Jt=!1;function Lo(){Jt||(Jt=!0,Po.then(Qr))}function Yt(e){Se.push(e)}const Vt=new Set;let ve=0;function Qr(){if(ve!==0)return;const e=Ke;do{try{for(;ve<Ee.length;){const t=Ee[ve];ve++,Me(t),Mo(t.$$)}}catch(t){throw Ee.length=0,ve=0,t}for(Me(null),Ee.length=0,ve=0;jn.length;)jn.pop()();for(let t=0;t<Se.length;t+=1){const n=Se[t];Vt.has(n)||(Vt.add(n),n())}Se.length=0}while(Ee.length);for(;Bn.length;)Bn.pop()();Jt=!1,Vt.clear(),Me(e)}function Mo(e){if(e.fragment!==null){e.update(),Je(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Yt)}}function Fo(e){const t=[],n=[];Se.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Se=t}const Uo=new Set;function $o(e,t){e&&e.i&&(Uo.delete(e),e.i(t))}function Gn(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ko(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Yt(()=>{const o=e.$$.on_mount.map(Wr).filter(Hr);e.$$.on_destroy?e.$$.on_destroy.push(...o):Je(o),e.$$.on_mount=[]}),i.forEach(Yt)}function Vo(e,t){const n=e.$$;n.fragment!==null&&(Fo(n.after_update),Je(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function jo(e,t){e.$$.dirty[0]===-1&&(Ee.push(e),Lo(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Bo(e,t,n,r,i,o,s=null,a=[-1]){const c=Ke;Me(e);const u=e.$$={fragment:null,ctx:[],props:o,update:$e,not_equal:i,bound:Vn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Vn(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};s&&s(u.root);let l=!1;if(u.ctx=n?n(e,t.props||{},(d,f,...h)=>{const p=h.length?h[0]:f;return u.ctx&&i(u.ctx[d],u.ctx[d]=p)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](p),l&&jo(e,d)),f}):[],u.update(),l=!0,Je(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const d=xo(t.target);u.fragment&&u.fragment.l(d),d.forEach(ae)}else u.fragment&&u.fragment.c();t.intro&&$o(e.$$.fragment),Ko(e,t.target,t.anchor),Qr()}Me(c)}class Go{constructor(){Ut(this,"$$");Ut(this,"$$set")}$destroy(){Vo(this,1),this.$destroy=$e}$on(t,n){if(!Hr(n))return $e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!No(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const qo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qo);function ft(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ft=function(n){return typeof n}:ft=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ft(e)}function Wo(e){return ft(e)=="object"&&e!==null}var zr=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function Xt(e,t){for(var n=/\r\n|[\n\r]/g,r=1,i=t+1,o;(o=n.exec(e.body))&&o.index<t;)r+=1,i=t+1-(o.index+o[0].length);return{line:r,column:i}}function Ho(e){return Jr(e.source,Xt(e.source,e.start))}function Jr(e,t){var n=e.locationOffset.column-1,r=ht(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=t.line===1?n:0,c=t.column+a,u="".concat(e.name,":").concat(s,":").concat(c,`
`),l=r.split(/\r\n|[\n\r]/g),d=l[i];if(d.length>120){for(var f=Math.floor(c/80),h=c%80,p=[],m=0;m<d.length;m+=80)p.push(d.slice(m,m+80));return u+qn([["".concat(s),p[0]]].concat(p.slice(1,f+1).map(function(g){return["",g]}),[[" ",ht(h-1)+"^"],["",p[f+1]]]))}return u+qn([["".concat(s-1),l[i-1]],["".concat(s),d],["",ht(c-1)+"^"],["".concat(s+1),l[i+1]]])}function qn(e){var t=e.filter(function(r){r[0];var i=r[1];return i!==void 0}),n=Math.max.apply(Math,t.map(function(r){var i=r[0];return i.length}));return t.map(function(r){var i=r[0],o=r[1];return Qo(n,i)+(o?" | "+o:" |")}).join(`
`)}function ht(e){return Array(e+1).join(" ")}function Qo(e,t){return ht(e-t.length)+t}function pt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pt=function(n){return typeof n}:pt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pt(e)}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wn(Object(n),!0).forEach(function(r){Jo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xo(e,t,n){return t&&Hn(e.prototype,t),n&&Hn(e,n),e}function Zo(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}function es(e){var t=Xr();return function(){var r=je(e),i;if(t){var o=je(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return Yr(this,i)}}function Yr(e,t){return t&&(pt(t)==="object"||typeof t=="function")?t:Re(e)}function Re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){var t=typeof Map=="function"?new Map:void 0;return Zt=function(r){if(r===null||!ts(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return yt(r,arguments,je(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ve(i,r)},Zt(e)}function yt(e,t,n){return Xr()?yt=Reflect.construct:yt=function(i,o,s){var a=[null];a.push.apply(a,o);var c=Function.bind.apply(i,a),u=new c;return s&&Ve(u,s.prototype),u},yt.apply(null,arguments)}function Xr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function ts(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Ve(e,t){return Ve=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ve(e,t)}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},je(e)}var be=function(e){Zo(n,e);var t=es(n);function n(r,i,o,s,a,c,u){var l,d,f,h;Yo(this,n),h=t.call(this,r),h.name="GraphQLError",h.originalError=c??void 0,h.nodes=Qn(Array.isArray(i)?i:i?[i]:void 0);for(var p=[],m=0,g=(v=h.nodes)!==null&&v!==void 0?v:[];m<g.length;m++){var v,w=g[m],b=w.loc;b!=null&&p.push(b)}p=Qn(p),h.source=o??((l=p)===null||l===void 0?void 0:l[0].source),h.positions=s??((d=p)===null||d===void 0?void 0:d.map(function(I){return I.start})),h.locations=s&&o?s.map(function(I){return Xt(o,I)}):(f=p)===null||f===void 0?void 0:f.map(function(I){return Xt(I.source,I.start)}),h.path=a??void 0;var O=c==null?void 0:c.extensions;return u==null&&Wo(O)?h.extensions=zo({},O):h.extensions=u??{},Object.defineProperties(Re(h),{message:{enumerable:!0},locations:{enumerable:h.locations!=null},path:{enumerable:h.path!=null},extensions:{enumerable:h.extensions!=null&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(Re(h),"stack",{value:c.stack,writable:!0,configurable:!0}),Yr(h)):(Error.captureStackTrace?Error.captureStackTrace(Re(h),n):Object.defineProperty(Re(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return Xo(n,[{key:"toString",value:function(){return ns(this)}},{key:zr,get:function(){return"Object"}}]),n}(Zt(Error));function Qn(e){return e===void 0||e.length===0?void 0:e}function ns(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+=`

`+Ho(i.loc))}else if(e.source&&e.locations)for(var o=0,s=e.locations;o<s.length;o++){var a=s[o];t+=`

`+Jr(e.source,a)}return t}function z(e,t,n){return new be("Syntax Error: ".concat(n),void 0,e,[t])}var S=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function rs(e,t){var n=!!e;if(!n)throw new Error(t??"Unexpected invariant triggered.")}var en=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function Zr(e){var t=e.prototype.toJSON;typeof t=="function"||rs(0),e.prototype.inspect=t,en&&(e.prototype[en]=t)}var ei=function(){function e(n,r,i){this.start=n.start,this.end=r.end,this.startToken=n,this.endToken=r,this.source=i}var t=e.prototype;return t.toJSON=function(){return{start:this.start,end:this.end}},e}();Zr(ei);var R=function(){function e(n,r,i,o,s,a,c){this.kind=n,this.start=r,this.end=i,this.line=o,this.column=s,this.value=c,this.prev=a,this.next=null}var t=e.prototype;return t.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();Zr(R);function zn(e){return e!=null&&typeof e.kind=="string"}var y=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function mt(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mt=function(n){return typeof n}:mt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mt(e)}var is=10,ti=2;function ni(e){return Ot(e,[])}function Ot(e,t){switch(mt(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return e===null?"null":os(e,t);default:return String(e)}}function os(e,t){if(t.indexOf(e)!==-1)return"[Circular]";var n=[].concat(t,[e]),r=cs(e);if(r!==void 0){var i=r.call(e);if(i!==e)return typeof i=="string"?i:Ot(i,n)}else if(Array.isArray(e))return as(e,n);return ss(e,n)}function ss(e,t){var n=Object.keys(e);if(n.length===0)return"{}";if(t.length>ti)return"["+us(e)+"]";var r=n.map(function(i){var o=Ot(e[i],t);return i+": "+o});return"{ "+r.join(", ")+" }"}function as(e,t){if(e.length===0)return"[]";if(t.length>ti)return"[Array]";for(var n=Math.min(is,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(Ot(e[o],t));return r===1?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items")),"["+i.join(", ")+"]"}function cs(e){var t=e[String(en)];if(typeof t=="function")return t;if(typeof e.inspect=="function")return e.inspect}function us(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){var n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}function jt(e,t){var n=!!e;if(!n)throw new Error(t)}const ls=function(t,n){return t instanceof n};function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ds(e,t,n){return t&&Jn(e.prototype,t),n&&Jn(e,n),e}var ri=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof t=="string"||jt(0,"Body must be a string. Received: ".concat(ni(t),".")),this.body=t,this.name=n,this.locationOffset=r,this.locationOffset.line>0||jt(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||jt(0,"column in locationOffset is 1-indexed and must be positive.")}return ds(e,[{key:zr,get:function(){return"Source"}}]),e}();function fs(e){return ls(e,ri)}var hs=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function ps(e){var t=e.split(/\r\n|[\n\r]/g),n=ys(e);if(n!==0)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&Yn(t[i]);)++i;for(var o=t.length;o>i&&Yn(t[o-1]);)--o;return t.slice(i,o).join(`
`)}function Yn(e){for(var t=0;t<e.length;++t)if(e[t]!==" "&&e[t]!=="	")return!1;return!0}function ys(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:e.charCodeAt(s+1)===10&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(o===null||i<o)&&(o=i),r=!1}return(t=o)!==null&&t!==void 0?t:0}function ms(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=e.indexOf(`
`)===-1,i=e[0]===" "||e[0]==="	",o=e[e.length-1]==='"',s=e[e.length-1]==="\\",a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+=`
`+t),c+=t?e.replace(/\n/g,`
`+t):e,a&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var gs=function(){function e(n){var r=new R(y.SOF,0,0,0,0,null);this.source=n,this.lastToken=r,this.token=r,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){this.lastToken=this.token;var r=this.token=this.lookahead();return r},t.lookahead=function(){var r=this.token;if(r.kind!==y.EOF)do{var i;r=(i=r.next)!==null&&i!==void 0?i:r.next=Es(this,r)}while(r.kind===y.COMMENT);return r},e}();function vs(e){return e===y.BANG||e===y.DOLLAR||e===y.AMP||e===y.PAREN_L||e===y.PAREN_R||e===y.SPREAD||e===y.COLON||e===y.EQUALS||e===y.AT||e===y.BRACKET_L||e===y.BRACKET_R||e===y.BRACE_L||e===y.PIPE||e===y.BRACE_R}function me(e){return isNaN(e)?y.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Es(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s=r.charCodeAt(o),a=e.line,c=1+o-e.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:r.charCodeAt(o+1)===10?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new R(y.BANG,o,o+1,a,c,t);case 35:return Ss(n,o,a,c,t);case 36:return new R(y.DOLLAR,o,o+1,a,c,t);case 38:return new R(y.AMP,o,o+1,a,c,t);case 40:return new R(y.PAREN_L,o,o+1,a,c,t);case 41:return new R(y.PAREN_R,o,o+1,a,c,t);case 46:if(r.charCodeAt(o+1)===46&&r.charCodeAt(o+2)===46)return new R(y.SPREAD,o,o+3,a,c,t);break;case 58:return new R(y.COLON,o,o+1,a,c,t);case 61:return new R(y.EQUALS,o,o+1,a,c,t);case 64:return new R(y.AT,o,o+1,a,c,t);case 91:return new R(y.BRACKET_L,o,o+1,a,c,t);case 93:return new R(y.BRACKET_R,o,o+1,a,c,t);case 123:return new R(y.BRACE_L,o,o+1,a,c,t);case 124:return new R(y.PIPE,o,o+1,a,c,t);case 125:return new R(y.BRACE_R,o,o+1,a,c,t);case 34:return r.charCodeAt(o+1)===34&&r.charCodeAt(o+2)===34?ws(n,o,a,c,t,e):Is(n,o,a,c,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return bs(n,o,s,a,c,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return _s(n,o,a,c,t)}throw z(n,o,Ts(s))}var u=e.line,l=1+o-e.lineStart;return new R(y.EOF,i,i,u,l,t)}function Ts(e){return e<32&&e!==9&&e!==10&&e!==13?"Cannot contain the invalid character ".concat(me(e),"."):e===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(me(e),".")}function Ss(e,t,n,r,i){var o=e.body,s,a=t;do s=o.charCodeAt(++a);while(!isNaN(s)&&(s>31||s===9));return new R(y.COMMENT,t,a,n,r,i,o.slice(t+1,a))}function bs(e,t,n,r,i,o){var s=e.body,a=n,c=t,u=!1;if(a===45&&(a=s.charCodeAt(++c)),a===48){if(a=s.charCodeAt(++c),a>=48&&a<=57)throw z(e,c,"Invalid number, unexpected digit after 0: ".concat(me(a),"."))}else c=Bt(e,c,a),a=s.charCodeAt(c);if(a===46&&(u=!0,a=s.charCodeAt(++c),c=Bt(e,c,a),a=s.charCodeAt(c)),(a===69||a===101)&&(u=!0,a=s.charCodeAt(++c),(a===43||a===45)&&(a=s.charCodeAt(++c)),c=Bt(e,c,a),a=s.charCodeAt(c)),a===46||Ns(a))throw z(e,c,"Invalid number, expected digit but got: ".concat(me(a),"."));return new R(u?y.FLOAT:y.INT,t,c,r,i,o,s.slice(t,c))}function Bt(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw z(e,i,"Invalid number, expected digit but got: ".concat(me(o),"."))}function Is(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,u="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&c!==10&&c!==13;){if(c===34)return u+=o.slice(a,s),new R(y.STRING,t,s+1,n,r,i,u);if(c<32&&c!==9)throw z(e,s,"Invalid character within String: ".concat(me(c),"."));if(++s,c===92){switch(u+=o.slice(a,s-1),c=o.charCodeAt(s),c){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:{var l=As(o.charCodeAt(s+1),o.charCodeAt(s+2),o.charCodeAt(s+3),o.charCodeAt(s+4));if(l<0){var d=o.slice(s+1,s+5);throw z(e,s,"Invalid character escape sequence: \\u".concat(d,"."))}u+=String.fromCharCode(l),s+=4;break}default:throw z(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++s,a=s}}throw z(e,s,"Unterminated string.")}function ws(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,u=0,l="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(u===34&&s.charCodeAt(a+1)===34&&s.charCodeAt(a+2)===34)return l+=s.slice(c,a),new R(y.BLOCK_STRING,t,a+3,n,r,i,ps(l));if(u<32&&u!==9&&u!==10&&u!==13)throw z(e,a,"Invalid character within String: ".concat(me(u),"."));u===10?(++a,++o.line,o.lineStart=a):u===13?(s.charCodeAt(a+1)===10?a+=2:++a,++o.line,o.lineStart=a):u===92&&s.charCodeAt(a+1)===34&&s.charCodeAt(a+2)===34&&s.charCodeAt(a+3)===34?(l+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw z(e,a,"Unterminated string.")}function As(e,t,n,r){return rt(e)<<12|rt(t)<<8|rt(n)<<4|rt(r)}function rt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function _s(e,t,n,r,i){for(var o=e.body,s=o.length,a=t+1,c=0;a!==s&&!isNaN(c=o.charCodeAt(a))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new R(y.NAME,t,a,n,r,i,o.slice(t,a))}function Ns(e){return e===95||e>=65&&e<=90||e>=97&&e<=122}function Gt(e,t){var n=new Os(e,t);return n.parseDocument()}var Os=function(){function e(n,r){var i=fs(n)?n:new ri(n);this._lexer=new gs(i),this._options=r}var t=e.prototype;return t.parseName=function(){var r=this.expectToken(y.NAME);return{kind:S.NAME,value:r.value,loc:this.loc(r)}},t.parseDocument=function(){var r=this._lexer.token;return{kind:S.DOCUMENT,definitions:this.many(y.SOF,this.parseDefinition,y.EOF),loc:this.loc(r)}},t.parseDefinition=function(){if(this.peek(y.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(y.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var r=this._lexer.token;if(this.peek(y.BRACE_L))return{kind:S.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(r)};var i=this.parseOperationType(),o;return this.peek(y.NAME)&&(o=this.parseName()),{kind:S.OPERATION_DEFINITION,operation:i,name:o,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseOperationType=function(){var r=this.expectToken(y.NAME);switch(r.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(r)},t.parseVariableDefinitions=function(){return this.optionalMany(y.PAREN_L,this.parseVariableDefinition,y.PAREN_R)},t.parseVariableDefinition=function(){var r=this._lexer.token;return{kind:S.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(y.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(y.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(r)}},t.parseVariable=function(){var r=this._lexer.token;return this.expectToken(y.DOLLAR),{kind:S.VARIABLE,name:this.parseName(),loc:this.loc(r)}},t.parseSelectionSet=function(){var r=this._lexer.token;return{kind:S.SELECTION_SET,selections:this.many(y.BRACE_L,this.parseSelection,y.BRACE_R),loc:this.loc(r)}},t.parseSelection=function(){return this.peek(y.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var r=this._lexer.token,i=this.parseName(),o,s;return this.expectOptionalToken(y.COLON)?(o=i,s=this.parseName()):s=i,{kind:S.FIELD,alias:o,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(y.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(r)}},t.parseArguments=function(r){var i=r?this.parseConstArgument:this.parseArgument;return this.optionalMany(y.PAREN_L,i,y.PAREN_R)},t.parseArgument=function(){var r=this._lexer.token,i=this.parseName();return this.expectToken(y.COLON),{kind:S.ARGUMENT,name:i,value:this.parseValueLiteral(!1),loc:this.loc(r)}},t.parseConstArgument=function(){var r=this._lexer.token;return{kind:S.ARGUMENT,name:this.parseName(),value:(this.expectToken(y.COLON),this.parseValueLiteral(!0)),loc:this.loc(r)}},t.parseFragment=function(){var r=this._lexer.token;this.expectToken(y.SPREAD);var i=this.expectOptionalKeyword("on");return!i&&this.peek(y.NAME)?{kind:S.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(r)}:{kind:S.INLINE_FRAGMENT,typeCondition:i?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},t.parseFragmentDefinition=function(){var r,i=this._lexer.token;return this.expectKeyword("fragment"),((r=this._options)===null||r===void 0?void 0:r.experimentalFragmentVariables)===!0?{kind:S.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}:{kind:S.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},t.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(r){var i=this._lexer.token;switch(i.kind){case y.BRACKET_L:return this.parseList(r);case y.BRACE_L:return this.parseObject(r);case y.INT:return this._lexer.advance(),{kind:S.INT,value:i.value,loc:this.loc(i)};case y.FLOAT:return this._lexer.advance(),{kind:S.FLOAT,value:i.value,loc:this.loc(i)};case y.STRING:case y.BLOCK_STRING:return this.parseStringLiteral();case y.NAME:switch(this._lexer.advance(),i.value){case"true":return{kind:S.BOOLEAN,value:!0,loc:this.loc(i)};case"false":return{kind:S.BOOLEAN,value:!1,loc:this.loc(i)};case"null":return{kind:S.NULL,loc:this.loc(i)};default:return{kind:S.ENUM,value:i.value,loc:this.loc(i)}}case y.DOLLAR:if(!r)return this.parseVariable();break}throw this.unexpected()},t.parseStringLiteral=function(){var r=this._lexer.token;return this._lexer.advance(),{kind:S.STRING,value:r.value,block:r.kind===y.BLOCK_STRING,loc:this.loc(r)}},t.parseList=function(r){var i=this,o=this._lexer.token,s=function(){return i.parseValueLiteral(r)};return{kind:S.LIST,values:this.any(y.BRACKET_L,s,y.BRACKET_R),loc:this.loc(o)}},t.parseObject=function(r){var i=this,o=this._lexer.token,s=function(){return i.parseObjectField(r)};return{kind:S.OBJECT,fields:this.any(y.BRACE_L,s,y.BRACE_R),loc:this.loc(o)}},t.parseObjectField=function(r){var i=this._lexer.token,o=this.parseName();return this.expectToken(y.COLON),{kind:S.OBJECT_FIELD,name:o,value:this.parseValueLiteral(r),loc:this.loc(i)}},t.parseDirectives=function(r){for(var i=[];this.peek(y.AT);)i.push(this.parseDirective(r));return i},t.parseDirective=function(r){var i=this._lexer.token;return this.expectToken(y.AT),{kind:S.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(r),loc:this.loc(i)}},t.parseTypeReference=function(){var r=this._lexer.token,i;return this.expectOptionalToken(y.BRACKET_L)?(i=this.parseTypeReference(),this.expectToken(y.BRACKET_R),i={kind:S.LIST_TYPE,type:i,loc:this.loc(r)}):i=this.parseNamedType(),this.expectOptionalToken(y.BANG)?{kind:S.NON_NULL_TYPE,type:i,loc:this.loc(r)}:i},t.parseNamedType=function(){var r=this._lexer.token;return{kind:S.NAMED_TYPE,name:this.parseName(),loc:this.loc(r)}},t.parseTypeSystemDefinition=function(){var r=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(r.kind===y.NAME)switch(r.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(r)},t.peekDescription=function(){return this.peek(y.STRING)||this.peek(y.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("schema");var o=this.parseDirectives(!0),s=this.many(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);return{kind:S.SCHEMA_DEFINITION,description:i,directives:o,operationTypes:s,loc:this.loc(r)}},t.parseOperationTypeDefinition=function(){var r=this._lexer.token,i=this.parseOperationType();this.expectToken(y.COLON);var o=this.parseNamedType();return{kind:S.OPERATION_TYPE_DEFINITION,operation:i,type:o,loc:this.loc(r)}},t.parseScalarTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("scalar");var o=this.parseName(),s=this.parseDirectives(!0);return{kind:S.SCALAR_TYPE_DEFINITION,description:i,name:o,directives:s,loc:this.loc(r)}},t.parseObjectTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("type");var o=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:S.OBJECT_TYPE_DEFINITION,description:i,name:o,interfaces:s,directives:a,fields:c,loc:this.loc(r)}},t.parseImplementsInterfaces=function(){var r;if(!this.expectOptionalKeyword("implements"))return[];if(((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLImplementsInterfaces)===!0){var i=[];this.expectOptionalToken(y.AMP);do i.push(this.parseNamedType());while(this.expectOptionalToken(y.AMP)||this.peek(y.NAME));return i}return this.delimitedMany(y.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var r;return((r=this._options)===null||r===void 0?void 0:r.allowLegacySDLEmptyFields)===!0&&this.peek(y.BRACE_L)&&this._lexer.lookahead().kind===y.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(y.BRACE_L,this.parseFieldDefinition,y.BRACE_R)},t.parseFieldDefinition=function(){var r=this._lexer.token,i=this.parseDescription(),o=this.parseName(),s=this.parseArgumentDefs();this.expectToken(y.COLON);var a=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:S.FIELD_DEFINITION,description:i,name:o,arguments:s,type:a,directives:c,loc:this.loc(r)}},t.parseArgumentDefs=function(){return this.optionalMany(y.PAREN_L,this.parseInputValueDef,y.PAREN_R)},t.parseInputValueDef=function(){var r=this._lexer.token,i=this.parseDescription(),o=this.parseName();this.expectToken(y.COLON);var s=this.parseTypeReference(),a;this.expectOptionalToken(y.EQUALS)&&(a=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:S.INPUT_VALUE_DEFINITION,description:i,name:o,type:s,defaultValue:a,directives:c,loc:this.loc(r)}},t.parseInterfaceTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("interface");var o=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:S.INTERFACE_TYPE_DEFINITION,description:i,name:o,interfaces:s,directives:a,fields:c,loc:this.loc(r)}},t.parseUnionTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("union");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:S.UNION_TYPE_DEFINITION,description:i,name:o,directives:s,types:a,loc:this.loc(r)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(y.EQUALS)?this.delimitedMany(y.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("enum");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:S.ENUM_TYPE_DEFINITION,description:i,name:o,directives:s,values:a,loc:this.loc(r)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(y.BRACE_L,this.parseEnumValueDefinition,y.BRACE_R)},t.parseEnumValueDefinition=function(){var r=this._lexer.token,i=this.parseDescription(),o=this.parseName(),s=this.parseDirectives(!0);return{kind:S.ENUM_VALUE_DEFINITION,description:i,name:o,directives:s,loc:this.loc(r)}},t.parseInputObjectTypeDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("input");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:S.INPUT_OBJECT_TYPE_DEFINITION,description:i,name:o,directives:s,fields:a,loc:this.loc(r)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(y.BRACE_L,this.parseInputValueDef,y.BRACE_R)},t.parseTypeSystemExtension=function(){var r=this._lexer.lookahead();if(r.kind===y.NAME)switch(r.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(r)},t.parseSchemaExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var i=this.parseDirectives(!0),o=this.optionalMany(y.BRACE_L,this.parseOperationTypeDefinition,y.BRACE_R);if(i.length===0&&o.length===0)throw this.unexpected();return{kind:S.SCHEMA_EXTENSION,directives:i,operationTypes:o,loc:this.loc(r)}},t.parseScalarTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var i=this.parseName(),o=this.parseDirectives(!0);if(o.length===0)throw this.unexpected();return{kind:S.SCALAR_TYPE_EXTENSION,name:i,directives:o,loc:this.loc(r)}},t.parseObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var i=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&a.length===0)throw this.unexpected();return{kind:S.OBJECT_TYPE_EXTENSION,name:i,interfaces:o,directives:s,fields:a,loc:this.loc(r)}},t.parseInterfaceTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var i=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&a.length===0)throw this.unexpected();return{kind:S.INTERFACE_TYPE_EXTENSION,name:i,interfaces:o,directives:s,fields:a,loc:this.loc(r)}},t.parseUnionTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var i=this.parseName(),o=this.parseDirectives(!0),s=this.parseUnionMemberTypes();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:S.UNION_TYPE_EXTENSION,name:i,directives:o,types:s,loc:this.loc(r)}},t.parseEnumTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var i=this.parseName(),o=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:S.ENUM_TYPE_EXTENSION,name:i,directives:o,values:s,loc:this.loc(r)}},t.parseInputObjectTypeExtension=function(){var r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var i=this.parseName(),o=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:S.INPUT_OBJECT_TYPE_EXTENSION,name:i,directives:o,fields:s,loc:this.loc(r)}},t.parseDirectiveDefinition=function(){var r=this._lexer.token,i=this.parseDescription();this.expectKeyword("directive"),this.expectToken(y.AT);var o=this.parseName(),s=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:S.DIRECTIVE_DEFINITION,description:i,name:o,arguments:s,repeatable:a,locations:c,loc:this.loc(r)}},t.parseDirectiveLocations=function(){return this.delimitedMany(y.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var r=this._lexer.token,i=this.parseName();if(hs[i.value]!==void 0)return i;throw this.unexpected(r)},t.loc=function(r){var i;if(((i=this._options)===null||i===void 0?void 0:i.noLocation)!==!0)return new ei(r,this._lexer.lastToken,this._lexer.source)},t.peek=function(r){return this._lexer.token.kind===r},t.expectToken=function(r){var i=this._lexer.token;if(i.kind===r)return this._lexer.advance(),i;throw z(this._lexer.source,i.start,"Expected ".concat(ii(r),", found ").concat(qt(i),"."))},t.expectOptionalToken=function(r){var i=this._lexer.token;if(i.kind===r)return this._lexer.advance(),i},t.expectKeyword=function(r){var i=this._lexer.token;if(i.kind===y.NAME&&i.value===r)this._lexer.advance();else throw z(this._lexer.source,i.start,'Expected "'.concat(r,'", found ').concat(qt(i),"."))},t.expectOptionalKeyword=function(r){var i=this._lexer.token;return i.kind===y.NAME&&i.value===r?(this._lexer.advance(),!0):!1},t.unexpected=function(r){var i=r??this._lexer.token;return z(this._lexer.source,i.start,"Unexpected ".concat(qt(i),"."))},t.any=function(r,i,o){this.expectToken(r);for(var s=[];!this.expectOptionalToken(o);)s.push(i.call(this));return s},t.optionalMany=function(r,i,o){if(this.expectOptionalToken(r)){var s=[];do s.push(i.call(this));while(!this.expectOptionalToken(o));return s}return[]},t.many=function(r,i,o){this.expectToken(r);var s=[];do s.push(i.call(this));while(!this.expectOptionalToken(o));return s},t.delimitedMany=function(r,i){this.expectOptionalToken(r);var o=[];do o.push(i.call(this));while(this.expectOptionalToken(r));return o},e}();function qt(e){var t=e.value;return ii(e.kind)+(t!=null?' "'.concat(t,'"'):"")}function ii(e){return vs(e)?'"'.concat(e,'"'):e}var ks={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Cs=Object.freeze({});function xs(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ks,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,u=void 0,l=void 0,d=[],f=[],h=e;do{s++;var p=s===o.length,m=p&&a.length!==0;if(p){if(u=f.length===0?void 0:d[d.length-1],c=l,l=f.pop(),m){if(i)c=c.slice();else{for(var g={},v=0,w=Object.keys(c);v<w.length;v++){var b=w[v];g[b]=c[b]}c=g}for(var O=0,I=0;I<a.length;I++){var T=a[I][0],A=a[I][1];i&&(T-=O),i&&A===null?(c.splice(T,1),O++):c[T]=A}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(u=l?i?s:o[s]:void 0,c=l?l[u]:h,c==null)continue;l&&d.push(u)}var k=void 0;if(!Array.isArray(c)){if(!zn(c))throw new Error("Invalid AST Node: ".concat(ni(c),"."));var x=Ds(t,c.kind,p);if(x){if(k=x.call(t,c,u,l,d,f),k===Cs)break;if(k===!1){if(!p){d.pop();continue}}else if(k!==void 0&&(a.push([u,k]),!p))if(zn(k))c=k;else{d.pop();continue}}}if(k===void 0&&m&&a.push([u,c]),p)d.pop();else{var J;r={inArray:i,index:s,keys:o,edits:a,prev:r},i=Array.isArray(c),o=i?c:(J=n[c.kind])!==null&&J!==void 0?J:[],s=-1,a=[],l&&f.push(l),l=c}}while(r!==void 0);return a.length!==0&&(h=a[a.length-1][1]),h}function Ds(e,t,n){var r=e[t];if(r){if(!n&&typeof r=="function")return r;var i=n?r.leave:r.enter;if(typeof i=="function")return i}else{var o=n?e.leave:e.enter;if(o){if(typeof o=="function")return o;var s=o[t];if(typeof s=="function")return s}}}function xe(e){return xs(e,{leave:Ps})}var Rs=80,Ps={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return E(t.definitions,`

`)+`
`},OperationDefinition:function(t){var n=t.operation,r=t.name,i=D("(",E(t.variableDefinitions,", "),")"),o=E(t.directives," "),s=t.selectionSet;return!r&&!o&&!i&&n==="query"?s:E([n,E([r,i]),o,s]," ")},VariableDefinition:function(t){var n=t.variable,r=t.type,i=t.defaultValue,o=t.directives;return n+": "+r+D(" = ",i)+D(" ",E(o," "))},SelectionSet:function(t){var n=t.selections;return ee(n)},Field:function(t){var n=t.alias,r=t.name,i=t.arguments,o=t.directives,s=t.selectionSet,a=D("",n,": ")+r,c=a+D("(",E(i,", "),")");return c.length>Rs&&(c=a+D(`(
`,gt(E(i,`
`)),`
)`)),E([c,E(o," "),s]," ")},Argument:function(t){var n=t.name,r=t.value;return n+": "+r},FragmentSpread:function(t){var n=t.name,r=t.directives;return"..."+n+D(" ",E(r," "))},InlineFragment:function(t){var n=t.typeCondition,r=t.directives,i=t.selectionSet;return E(["...",D("on ",n),E(r," "),i]," ")},FragmentDefinition:function(t){var n=t.name,r=t.typeCondition,i=t.variableDefinitions,o=t.directives,s=t.selectionSet;return"fragment ".concat(n).concat(D("(",E(i,", "),")")," ")+"on ".concat(r," ").concat(D("",E(o," ")," "))+s},IntValue:function(t){var n=t.value;return n},FloatValue:function(t){var n=t.value;return n},StringValue:function(t,n){var r=t.value,i=t.block;return i?ms(r,n==="description"?"":"  "):JSON.stringify(r)},BooleanValue:function(t){var n=t.value;return n?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){var n=t.value;return n},ListValue:function(t){var n=t.values;return"["+E(n,", ")+"]"},ObjectValue:function(t){var n=t.fields;return"{"+E(n,", ")+"}"},ObjectField:function(t){var n=t.name,r=t.value;return n+": "+r},Directive:function(t){var n=t.name,r=t.arguments;return"@"+n+D("(",E(r,", "),")")},NamedType:function(t){var n=t.name;return n},ListType:function(t){var n=t.type;return"["+n+"]"},NonNullType:function(t){var n=t.type;return n+"!"},SchemaDefinition:Z(function(e){var t=e.directives,n=e.operationTypes;return E(["schema",E(t," "),ee(n)]," ")}),OperationTypeDefinition:function(t){var n=t.operation,r=t.type;return n+": "+r},ScalarTypeDefinition:Z(function(e){var t=e.name,n=e.directives;return E(["scalar",t,E(n," ")]," ")}),ObjectTypeDefinition:Z(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return E(["type",t,D("implements ",E(n," & ")),E(r," "),ee(i)]," ")}),FieldDefinition:Z(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(Xn(n)?D(`(
`,gt(E(n,`
`)),`
)`):D("(",E(n,", "),")"))+": "+r+D(" ",E(i," "))}),InputValueDefinition:Z(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return E([t+": "+n,D("= ",r),E(i," ")]," ")}),InterfaceTypeDefinition:Z(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return E(["interface",t,D("implements ",E(n," & ")),E(r," "),ee(i)]," ")}),UnionTypeDefinition:Z(function(e){var t=e.name,n=e.directives,r=e.types;return E(["union",t,E(n," "),r&&r.length!==0?"= "+E(r," | "):""]," ")}),EnumTypeDefinition:Z(function(e){var t=e.name,n=e.directives,r=e.values;return E(["enum",t,E(n," "),ee(r)]," ")}),EnumValueDefinition:Z(function(e){var t=e.name,n=e.directives;return E([t,E(n," ")]," ")}),InputObjectTypeDefinition:Z(function(e){var t=e.name,n=e.directives,r=e.fields;return E(["input",t,E(n," "),ee(r)]," ")}),DirectiveDefinition:Z(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(Xn(n)?D(`(
`,gt(E(n,`
`)),`
)`):D("(",E(n,", "),")"))+(r?" repeatable":"")+" on "+E(i," | ")}),SchemaExtension:function(t){var n=t.directives,r=t.operationTypes;return E(["extend schema",E(n," "),ee(r)]," ")},ScalarTypeExtension:function(t){var n=t.name,r=t.directives;return E(["extend scalar",n,E(r," ")]," ")},ObjectTypeExtension:function(t){var n=t.name,r=t.interfaces,i=t.directives,o=t.fields;return E(["extend type",n,D("implements ",E(r," & ")),E(i," "),ee(o)]," ")},InterfaceTypeExtension:function(t){var n=t.name,r=t.interfaces,i=t.directives,o=t.fields;return E(["extend interface",n,D("implements ",E(r," & ")),E(i," "),ee(o)]," ")},UnionTypeExtension:function(t){var n=t.name,r=t.directives,i=t.types;return E(["extend union",n,E(r," "),i&&i.length!==0?"= "+E(i," | "):""]," ")},EnumTypeExtension:function(t){var n=t.name,r=t.directives,i=t.values;return E(["extend enum",n,E(r," "),ee(i)]," ")},InputObjectTypeExtension:function(t){var n=t.name,r=t.directives,i=t.fields;return E(["extend input",n,E(r," "),ee(i)]," ")}};function Z(e){return function(t){return E([t.description,e(t)],`
`)}}function E(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=e==null?void 0:e.filter(function(r){return r}).join(n))!==null&&t!==void 0?t:""}function ee(e){return D(`{
`,gt(E(e,`
`)),`
}`)}function D(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?e+t+n:""}function gt(e){return D("  ",e.replace(/\n/g,`
  `))}function Ls(e){return e.indexOf(`
`)!==-1}function Xn(e){return e!=null&&e.some(Ls)}var tn=function(e,t){return tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},tn(e,t)};function yn(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function oi(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function mn(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Be(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nn(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function rn(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Ie(e){return this instanceof Ie?(this.v=e,this):new Ie(e)}function Ms(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){o.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(o[0][3],p)}}function c(f){f.value instanceof Ie?Promise.resolve(f.value.v).then(u,l):d(o[0][2],f)}function u(f){a("next",f)}function l(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Fs(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Be=="function"?Be(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}function B(e){return typeof e=="function"}function Us(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Wt=Us(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Zn(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var gn=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Be(s),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var l=this.initialTeardown;if(B(l))try{l()}catch(m){o=m instanceof Wt?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Be(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{er(p)}catch(m){o=o??[],m instanceof Wt?o=rn(rn([],nn(o)),nn(m.errors)):o.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new Wt(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)er(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Zn(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Zn(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();gn.EMPTY;function si(e){return e instanceof gn||e&&"closed"in e&&B(e.remove)&&B(e.add)&&B(e.unsubscribe)}function er(e){B(e)?e():e.unsubscribe()}var ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ci={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,rn([e,t],nn(n)))},clearTimeout:function(e){var t=ci.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ui(e){ci.setTimeout(function(){throw e})}function tr(){}function $s(e){e()}var vn=function(e){yn(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,si(n)&&n.add(r)):r.destination=Bs,r}return t.create=function(n,r,i){return new on(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(gn),Ks=Function.prototype.bind;function Ht(e,t){return Ks.call(e,t)}var Vs=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){it(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){it(r)}else it(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){it(n)}},e}(),on=function(e){yn(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(B(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&ai.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Ht(n.next,a),error:n.error&&Ht(n.error,a),complete:n.complete&&Ht(n.complete,a)}):s=n}return o.destination=new Vs(s),o}return t}(vn);function it(e){ui(e)}function js(e){throw e}var Bs={closed:!0,next:tr,error:js,complete:tr},En=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Gs(e){return e}function qs(e){return e.length===0?Gs:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var W=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=Hs(t)?t:new on(t,n,r);return $s(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=nr(n),new n(function(i,o){var s=new on({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[En]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return qs(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=nr(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function nr(e){var t;return(t=e??ai.Promise)!==null&&t!==void 0?t:Promise}function Ws(e){return e&&B(e.next)&&B(e.error)&&B(e.complete)}function Hs(e){return e&&e instanceof vn||Ws(e)&&si(e)}function Qs(e){return B(e==null?void 0:e.lift)}function Ye(e){return function(t){if(Qs(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function kt(e,t,n,r,i){return new zs(e,t,n,r,i)}var zs=function(e){yn(t,e);function t(n,r,i,o,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(u){try{r(u)}catch(l){n.error(l)}}:e.prototype._next,c._error=o?function(u){try{o(u)}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(vn),li=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function di(e){return B(e==null?void 0:e.then)}function fi(e){return B(e[En])}function hi(e){return Symbol.asyncIterator&&B(e==null?void 0:e[Symbol.asyncIterator])}function pi(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Js(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yi=Js();function mi(e){return B(e==null?void 0:e[yi])}function gi(e){return Ms(this,arguments,function(){var n,r,i,o;return mn(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Ie(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Ie(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Ie(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function vi(e){return B(e==null?void 0:e.getReader)}function Ct(e){if(e instanceof W)return e;if(e!=null){if(fi(e))return Ys(e);if(li(e))return Xs(e);if(di(e))return Zs(e);if(hi(e))return Ei(e);if(mi(e))return ea(e);if(vi(e))return ta(e)}throw pi(e)}function Ys(e){return new W(function(t){var n=e[En]();if(B(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Xs(e){return new W(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Zs(e){return new W(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,ui)})}function ea(e){return new W(function(t){var n,r;try{for(var i=Be(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function Ei(e){return new W(function(t){na(e,t).catch(function(n){return t.error(n)})})}function ta(e){return Ei(gi(e))}function na(e,t){var n,r,i,o;return oi(this,void 0,void 0,function(){var s,a;return mn(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Fs(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function ye(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function Ti(e,t){return t===void 0&&(t=0),Ye(function(n,r){n.subscribe(kt(r,function(i){return ye(r,e,function(){return r.next(i)},t)},function(){return ye(r,e,function(){return r.complete()},t)},function(i){return ye(r,e,function(){return r.error(i)},t)}))})}function Si(e,t){return t===void 0&&(t=0),Ye(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ra(e,t){return Ct(e).pipe(Si(t),Ti(t))}function ia(e,t){return Ct(e).pipe(Si(t),Ti(t))}function oa(e,t){return new W(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function sa(e,t){return new W(function(n){var r;return ye(n,t,function(){r=e[yi](),ye(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return B(r==null?void 0:r.return)&&r.return()}})}function bi(e,t){if(!e)throw new Error("Iterable cannot be null");return new W(function(n){ye(n,t,function(){var r=e[Symbol.asyncIterator]();ye(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function aa(e,t){return bi(gi(e),t)}function ca(e,t){if(e!=null){if(fi(e))return ra(e,t);if(li(e))return oa(e,t);if(di(e))return ia(e,t);if(hi(e))return bi(e,t);if(mi(e))return sa(e,t);if(vi(e))return aa(e,t)}throw pi(e)}function ua(e,t){return t?ca(e,t):Ct(e)}function Ii(e,t){return Ye(function(n,r){var i=0;n.subscribe(kt(r,function(o){r.next(e.call(t,o,i++))}))})}function la(e,t){return Ye(function(n,r){var i=0;n.subscribe(kt(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function wi(e){return Ye(function(t,n){var r=null,i=!1,o;r=t.subscribe(kt(n,void 0,void 0,function(s){o=Ct(e(s,wi(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}const da="Logging",fa="x-amz-user-agent",ha="NoHubcallbackProvidedException";var te;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(te||(te={}));const rr={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class H{constructor(t,n=te.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let r=this.level;H.LOG_LEVEL&&(r=H.LOG_LEVEL),typeof window<"u"&&window.LOG_LEVEL&&(r=window.LOG_LEVEL);const i=rr[r];if(!(rr[t]>=i))return;let s=console.log.bind(console);t===te.ERROR&&console.error&&(s=console.error.bind(console)),t===te.WARN&&console.warn&&(s=console.warn.bind(console));const a=`[${t}] ${this._ts()} ${this.name}`;let c="";if(n.length===1&&typeof n[0]=="string")c=`${a} - ${n[0]}`,s(c);else if(n.length===1)c=`${a} ${n[0]}`,s(a,n[0]);else if(typeof n[0]=="string"){let u=n.slice(1);u.length===1&&(u=u[0]),c=`${a} - ${n[0]} ${u}`,s(`${a} - ${n[0]}`,u)}else c=`${a} ${n}`,s(a,n);for(const u of this._pluggables){const l={message:c,timestamp:Date.now()};u.pushLogs([l])}}log(...t){this._log(te.INFO,...t)}info(...t){this._log(te.INFO,...t)}warn(...t){this._log(te.WARN,...t)}error(...t){this._log(te.ERROR,...t)}debug(...t){this._log(te.DEBUG,...t)}verbose(...t){this._log(te.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===da&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}H.LOG_LEVEL=null;class X extends Error{constructor({message:t,name:n,recoverySuggestion:r,underlyingError:i}){super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=r,this.constructor=X,Object.setPrototypeOf(this,X.prototype)}}var St;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"})(St||(St={}));const Ai=(e,t=X)=>(n,r,i)=>{const{message:o,recoverySuggestion:s}=e[r];if(!n)throw new t({name:r,message:i?`${o} ${i}`:o,recoverySuggestion:s})},Ge=typeof Symbol<"u"?Symbol("amplify_default"):"@@amplify_default",De=new H("Hub");class pa{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const r=this.listeners.get(t);if(!r){De.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...r.filter(({callback:i})=>i!==n)])}dispatch(t,n,r,i){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(i===Ge||De.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const o={channel:t,payload:{...n},source:r,patternInfo:[]};try{this._toListeners(o)}catch(s){De.error(s)}}listen(t,n,r="noname"){let i;if(typeof n!="function")throw new X({name:ha,message:"No callback supplied to Hub"});i=n;let o=this.listeners.get(t);return o||(o=[],this.listeners.set(t,o)),o.push({name:r,callback:i}),()=>{this._remove(t,i)}}_toListeners(t){const{channel:n,payload:r}=t,i=this.listeners.get(n);i&&i.forEach(o=>{De.debug(`Dispatching to ${n} with `,r);try{o.callback(t)}catch(s){De.error(s)}})}}const qe=new pa("__default__"),ya=()=>{if(typeof window<"u"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new X({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},ma=()=>{if(typeof window<"u"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new X({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},ga={convert(e){return ma()(e)}};var le;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(le||(le={}));const va={[le.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[le.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[le.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[le.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[le.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},_i=Ai(va);function bt(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,_i(t,le.AuthUserPoolException)}function vt(e){const t=!!(e!=null&&e.identityPoolId);_i(t,le.InvalidIdentityPoolIdException)}function We(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const r=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(ga.convert(r).split("").map(s=>`%${`00${s.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(i);return{toString:()=>e,payload:o}}catch{throw new Error("Invalid token payload")}}const Ea=new H("parseAWSExports"),Ta={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},Ni=(e={})=>{var Rn,Pn,Ln,Mn,Fn,Un;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new X({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:r,aws_appsync_region:i,aws_bots_config:o,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:c,aws_cognito_mfa_types:u,aws_cognito_password_protection_settings:l,aws_cognito_verification_mechanisms:d,aws_cognito_signup_attributes:f,aws_cognito_social_providers:h,aws_cognito_username_attributes:p,aws_mandatory_sign_in:m,aws_mobile_analytics_app_id:g,aws_mobile_analytics_app_region:v,aws_user_files_s3_bucket:w,aws_user_files_s3_bucket_region:b,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:O,aws_user_pools_id:I,aws_user_pools_web_client_id:T,geo:A,oauth:k,predictions:x,aws_cloud_logic_custom:J,Notifications:ce,modelIntrospection:Ce}=e,F={};g&&(F.Analytics={Pinpoint:{appId:g,region:v}});const{InAppMessaging:_,Push:N}=ce??{};if(_!=null&&_.AWSPinpoint||N!=null&&N.AWSPinpoint){if(_!=null&&_.AWSPinpoint){const{appId:P,region:he}=_.AWSPinpoint;F.Notifications={InAppMessaging:{Pinpoint:{appId:P,region:he}}}}if(N!=null&&N.AWSPinpoint){const{appId:P,region:he}=N.AWSPinpoint;F.Notifications={...F.Notifications,PushNotification:{Pinpoint:{appId:P,region:he}}}}}if(Array.isArray(o)&&(F.Interactions={LexV1:Object.fromEntries(o.map(P=>[P.name,P]))}),r){const P=Ta[n];P||Ea.debug(`Invalid authentication type ${n}. Falling back to IAM.`),F.API={GraphQL:{endpoint:r,apiKey:t,region:i,defaultAuthMode:P??"iam"}},Ce&&(F.API.GraphQL.modelIntrospection=Ce)}const $=c?{status:c&&c.toLowerCase(),totpEnabled:(u==null?void 0:u.includes("TOTP"))??!1,smsEnabled:(u==null?void 0:u.includes("SMS"))??!1}:void 0,V=l?{minLength:l.passwordPolicyMinLength,requireLowercase:((Rn=l.passwordPolicyCharacters)==null?void 0:Rn.includes("REQUIRES_LOWERCASE"))??!1,requireUppercase:((Pn=l.passwordPolicyCharacters)==null?void 0:Pn.includes("REQUIRES_UPPERCASE"))??!1,requireNumbers:((Ln=l.passwordPolicyCharacters)==null?void 0:Ln.includes("REQUIRES_NUMBERS"))??!1,requireSpecialCharacters:((Mn=l.passwordPolicyCharacters)==null?void 0:Mn.includes("REQUIRES_SYMBOLS"))??!1}:void 0,Eo=Array.from(new Set([...d??[],...f??[]])).reduce((P,he)=>({...P,[he.toLowerCase()]:{required:!0}}),{}),xn=(p==null?void 0:p.includes("EMAIL"))??!1,Dn=(p==null?void 0:p.includes("PHONE_NUMBER"))??!1;(s||I)&&(F.Auth={Cognito:{identityPoolId:s,allowGuestAccess:m!=="enable",signUpVerificationMethod:a,userAttributes:Eo,userPoolClientId:T,userPoolId:I,mfa:$,passwordFormat:V,loginWith:{username:!(xn||Dn),email:xn,phone:Dn}}});const To=k?Object.keys(k).length>0:!1,So=h?h.length>0:!1;if(F.Auth&&To&&(F.Auth.Cognito.loginWith={...F.Auth.Cognito.loginWith,oauth:{...Sa(k),...So&&{providers:ba(h)}}}),w&&(F.Storage={S3:{bucket:w,region:b,dangerouslyConnectToHttpEndpointForTesting:O}}),A){const{amazon_location_service:P}=A;F.Geo=P?{LocationService:{...P,searchIndices:P.search_indices,region:P.region}}:{...A}}if(J&&(F.API={...F.API,REST:J.reduce((P,he)=>{const{name:bo,endpoint:Io,region:$n,service:Kn}=he;return{...P,[bo]:{endpoint:Io,...Kn?{service:Kn}:void 0,...$n?{region:$n}:void 0}}},{})}),x){const{VoiceId:P}=((Un=(Fn=x==null?void 0:x.convert)==null?void 0:Fn.speechGenerator)==null?void 0:Un.defaults)??{};F.Predictions=P?{...x,convert:{...x.convert,speechGenerator:{...x.convert.speechGenerator,defaults:{voiceId:P}}}}:x}return F},ir=e=>(e==null?void 0:e.split(","))??[],Sa=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:r,responseType:i})=>({domain:e,scopes:t,redirectSignIn:ir(n),redirectSignOut:ir(r),responseType:i}),ba=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),Oi=e=>e&&e["nonRetryable"],ot=new H("retryUtil");async function Ia(e,t,n,r){if(typeof e!="function")throw Error("functionToRetry must be a function");return new Promise(async(i,o)=>{let s=0,a=!1,c,u=()=>{},l;for(r&&r.then(()=>{a=!0,clearTimeout(c),u()});!a;){s++,ot.debug(`${e.name} attempt #${s} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(d){if(l=d,ot.debug(`error on ${e.name}`,d),Oi(d)){ot.debug(`${e.name} non retryable error`,d),o(d);return}const f=n(s,t,d);if(ot.debug(`${e.name} retrying in ${f} ms`),f===!1||a){o(d);return}else await new Promise(h=>{u=h,c=setTimeout(u,f)})}}o(l)})}const ki=e=>{const t=Reflect.ownKeys(e);for(const n of t){const r=e[n];(r&&typeof r=="object"||typeof r=="function")&&ki(r)}return Object.freeze(e)};function or({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class wa{configure(t,n){this.authConfig=t,this.authOptions=n}async fetchAuthSession(t={}){var o,s,a,c,u,l;let n,r;const i=await this.getTokens(t);return i?(r=(s=(o=i.accessToken)==null?void 0:o.payload)==null?void 0:s.sub,n=await((c=(a=this.authOptions)==null?void 0:a.credentialsProvider)==null?void 0:c.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh}))):n=await((l=(u=this.authOptions)==null?void 0:u.credentialsProvider)==null?void 0:l.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh})),{tokens:i,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:r}}async clearCredentials(){var t,n;await((n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId())}async getTokens(t){var n,r;return await((r=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:r.getTokens(t))??void 0}}const Aa=Symbol("oauth-listener");class _a{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new wa}configure(t,n){let r;Object.keys(t).some(i=>i.startsWith("aws_"))?r=Ni(t):r=t,this.resourcesConfig=r,n&&(this.libraryOptions=n),this.resourcesConfig=ki(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),qe.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",Ge),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[Aa](t){var n,r,i;(r=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&r.oauth?t((i=this.resourcesConfig.Auth)==null?void 0:i.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,r;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((r=this.resourcesConfig.Auth)==null?void 0:r.Cognito),this.oAuthListener=void 0)}}const oe=new _a,Na=(e,t)=>e.Auth.fetchAuthSession(t),sr=e=>Na(oe,e);var Y=64,Oa=32,ka=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ca=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],xa=Math.pow(2,53)-1,Et=function(){function e(){this.state=Int32Array.from(Ca),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,r=t.byteLength;if(this.bytesHashed+=r,this.bytesHashed*8>xa)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;r>0;)this.buffer[this.bufferLength++]=t[n++],r--,this.bufferLength===Y&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),r=this.bufferLength;if(n.setUint8(this.bufferLength++,128),r%Y>=Y-8){for(var i=this.bufferLength;i<Y;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<Y-8;i++)n.setUint8(i,0);n.setUint32(Y-8,Math.floor(t/4294967296),!0),n.setUint32(Y-4,t),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(Oa),i=0;i<8;i++)o[i*4]=this.state[i]>>>24&255,o[i*4+1]=this.state[i]>>>16&255,o[i*4+2]=this.state[i]>>>8&255,o[i*4+3]=this.state[i]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,r=t.state,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],u=r[5],l=r[6],d=r[7],f=0;f<Y;f++){if(f<16)this.temp[f]=(n[f*4]&255)<<24|(n[f*4+1]&255)<<16|(n[f*4+2]&255)<<8|n[f*4+3]&255;else{var h=this.temp[f-2],p=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10;h=this.temp[f-15];var m=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3;this.temp[f]=(p+this.temp[f-7]|0)+(m+this.temp[f-16]|0)}var g=(((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+(c&u^~c&l)|0)+(d+(ka[f]+this.temp[f]|0)|0)|0,v=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&o^i&s^o&s)|0;d=l,l=u,u=c,c=a+g|0,a=s,s=o,o=i,i=g+v|0}r[0]+=i,r[1]+=o,r[2]+=s,r[3]+=a,r[4]+=c,r[5]+=u,r[6]+=l,r[7]+=d},e}();const Da=e=>new TextEncoder().encode(e);var Ra=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Da;function Ci(e){return e instanceof Uint8Array?e:typeof e=="string"?Ra(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function Pa(e){return typeof e=="string"?e.length===0:e.byteLength===0}var La=function(){function e(t){this.secret=t,this.hash=new Et,this.reset()}return e.prototype.update=function(t){if(!(Pa(t)||this.error))try{this.hash.update(Ci(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return oi(this,void 0,void 0,function(){return mn(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new Et,this.secret){this.outer=new Et;var t=Ma(this.secret),n=new Uint8Array(Y);n.set(t);for(var r=0;r<Y;r++)t[r]^=54,n[r]^=92;this.hash.update(t),this.outer.update(n);for(var r=0;r<t.byteLength;r++)t[r]=0}},e}();function Ma(e){var t=Ci(e);if(t.byteLength>Y){var n=new Et;n.update(t),t=n.digest()}var r=new Uint8Array(Y);return r.set(t),r}const xi={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),xi[e]=t}function Fa(e){let t="";for(let n=0;n<e.byteLength;n++)t+=xi[e[n]];return t}const xt=e=>{const{headers:t,statusCode:n}=e;return{...Ua(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},Ua=e=>typeof(e==null?void 0:e.$metadata)=="object",Oe=async e=>{if(!e||e.statusCode<300)return;const t=await Dt(e),r=(s=>{const[a]=s.toString().split(/[,:]+/);return a.includes("#")?a.split("#")[1]:a})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError"),i=t.message??t.Message??"Unknown error",o=new Error(i);return Object.assign(o,{name:r,$metadata:xt(e)})},Dt=async e=>{if(!e.body)throw new Error("Missing response payload");const t=await e.body.json();return Object.assign(t,{$metadata:xt(e)})},Tn=(e,t,n,r)=>async(i,o)=>{const s={...r,...i},a=await s.endpointResolver(s,o),c=await t(o,a),u=await e(c,{...s});return n(u)},Di={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},$a={partitions:[Di,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Ri=e=>{const{partitions:t}=$a;for(const{regions:n,outputs:r,regionRegex:i}of t){const o=new RegExp(i);if(n.includes(e)||o.test(e))return r.dnsSuffix}return Di.outputs.dnsSuffix},Ka=3,Pi=({maxAttempts:e=Ka,retryDecider:t,computeDelay:n,abortSignal:r})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,o)=>async function(a){let c,u=o.attemptsCount??0,l;const d=()=>{if(l)return ar(l,u),l;throw ar(c,u),c};for(;!(r!=null&&r.aborted)&&u<e;){try{l=await i(a),c=void 0}catch(f){c=f,l=void 0}if(u=(o.attemptsCount??0)>u?o.attemptsCount??0:u+1,o.attemptsCount=u,await t(l,c)){if(!(r!=null&&r.aborted)&&u<e){const f=n(u);await Va(f,r)}continue}else return d()}if(r!=null&&r.aborted)throw new Error("Request aborted.");return d()}},Va=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,r;const i=new Promise(o=>{r=o,n=setTimeout(o,e)});return t==null||t.addEventListener("abort",function o(s){clearTimeout(n),t==null||t.removeEventListener("abort",o),r()}),i},ar=(e,t)=>{Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata={...e.$metadata??{},attempts:t})},Li=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(i){if(t.trim().length===0)return await n(i);{const o=e.toLowerCase();return i.headers[o]=i.headers[o]?`${i.headers[o]} ${t}`:t,await n(i)}},Rt=(e,t)=>(n,r)=>{const i={};let o=s=>e(s,r);for(let s=t.length-1;s>=0;s--){const a=t[s];o=a(r)(o,i)}return o(n)},Qt=e=>{let t;return()=>(t||(t=e()),t)},ja=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),Mi=async({url:e,method:t,headers:n,body:r},{abortSignal:i,cache:o,withCrossDomainCredentials:s})=>{var d;let a;try{a=await fetch(e,{method:t,headers:n,body:ja(t)?r:void 0,signal:i,cache:o,credentials:s?"include":"same-origin"})}catch(f){throw f instanceof TypeError?new Error("Network error"):f}const c={};(d=a.headers)==null||d.forEach((f,h)=>{c[h.toLowerCase()]=f});const u={statusCode:a.status,headers:c,body:null},l=Object.assign(a.body??{},{text:Qt(()=>a.text()),blob:Qt(()=>a.blob()),json:Qt(()=>a.json())});return{...u,body:l}},Sn=Rt(Mi,[Li,Pi]),Fi=5*60*1e3;function Ui(e=Fi){return r=>{const i=2**r*100+100*Math.random();return i>e?!1:i}}const cr=5*60*1e3,bn=e=>{const n=Ui(cr)(e);return n===!1?cr:n},Ba=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Ga=e=>!!e&&Ba.includes(e),In=e=>async(t,n)=>{const r=n??await e(t)??void 0,i=r==null?void 0:r.code,o=t==null?void 0:t.statusCode;return Qa(n)||Ha(o,i)||Ga(i)||za(o,i)},qa=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Wa=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ha=(e,t)=>e===429||!!t&&qa.includes(t),Qa=e=>(e==null?void 0:e.name)==="Network error",za=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Wa.includes(t),ge=URL;var U;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(U||(U={}));var sn;(function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(sn||(sn={}));var ur;(function(e){e.Record="1",e.IdentifyUser="2"})(ur||(ur={}));var an;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(an||(an={}));var lr;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36"})(lr||(lr={}));var dr;(function(e){e.Subscribe="1",e.GraphQl="2"})(dr||(dr={}));var fr;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(fr||(fr={}));var hr;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(hr||(hr={}));var pr;(function(e){e.None="0"})(pr||(pr={}));var yr;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(yr||(yr={}));var mr;(function(e){e.Subscribe="1"})(mr||(mr={}));var gr;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(gr||(gr={}));var vr;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"})(vr||(vr={}));const Ja="6.0.18",Pt=()=>typeof global<"u",ke=()=>typeof window<"u",$i=()=>typeof document<"u",wn=()=>typeof process<"u",He=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var Er={};function Ya(){const e=r=>r.startsWith("_react")||r.startsWith("__react"),t=r=>Object.keys(r).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return $i()&&n().some(t)}function Xa(){return wn()&&typeof Er<"u"&&!!Object.keys(Er).find(e=>e.includes("react"))}function Za(){return ke()&&He(window,"__VUE")}function ec(){return Pt()&&He(global,"__VUE")}var Tr={};function tc(){return ke()&&He(window,"__SVELTE")}function nc(){return wn()&&typeof Tr<"u"&&!!Object.keys(Tr).find(e=>e.includes("svelte"))}function rc(){return ke()&&window.next&&typeof window.next=="object"}function ic(){return Pt()&&(He(global,"__next")||He(global,"__NEXT"))}function oc(){return ke()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function sc(){return Pt()&&typeof global.__NUXT_PATHS__<"u"}var Sr={};function ac(){const e=!!($i()&&document.querySelector("[ng-version]")),t=!!(ke()&&typeof window.ng<"u");return e||t}function cc(){var e;return wn()&&typeof Sr=="object"&&((e=Sr.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function uc(){return typeof navigator<"u"&&typeof navigator.product<"u"&&navigator.product==="ReactNative"}function lc(){return Pt()&&typeof global.expo<"u"}function dc(){return ke()}const fc=[{platform:U.Expo,detectionMethod:lc},{platform:U.ReactNative,detectionMethod:uc},{platform:U.NextJs,detectionMethod:rc},{platform:U.Nuxt,detectionMethod:oc},{platform:U.Angular,detectionMethod:ac},{platform:U.React,detectionMethod:Ya},{platform:U.VueJs,detectionMethod:Za},{platform:U.Svelte,detectionMethod:tc},{platform:U.WebUnknown,detectionMethod:dc},{platform:U.NextJsSSR,detectionMethod:ic},{platform:U.NuxtSSR,detectionMethod:sc},{platform:U.ReactSSR,detectionMethod:Xa},{platform:U.VueJsSSR,detectionMethod:ec},{platform:U.AngularSSR,detectionMethod:cc},{platform:U.SvelteSSR,detectionMethod:nc}];function hc(){var e;return((e=fc.find(t=>t.detectionMethod()))==null?void 0:e.platform)||U.ServerSideUnknown}let Fe;const Tt=[];let It=!1;const pc=10,yc=10,mc=1e3,Ki=()=>{var e;if(!Fe){if(Fe=hc(),It)for(;Tt.length;)(e=Tt.pop())==null||e();else Tt.forEach(t=>{t()});br(U.ServerSideUnknown,pc),br(U.WebUnknown,yc)}return Fe},gc=e=>{It||Tt.push(e)};function vc(){Fe=void 0}function br(e,t){Fe===e&&!It&&setTimeout(()=>{vc(),It=!0,setTimeout(Ki,mc)},t)}const Ec={},Tc=(e,t)=>{var n,r;return(r=(n=Ec[e])==null?void 0:n[t])==null?void 0:r.additionalDetails},Sc="aws-amplify",bc=({category:e,action:t}={})=>{const n=[[Sc,Ja]];if(e&&n.push([e,t]),n.push(["framework",Ki()]),e&&t){const r=Tc(e,t);r&&r.forEach(i=>{n.push(i)})}return n},Xe=e=>bc(e).map(([r,i])=>r&&i?`${r}/${i}`:r).join(" "),Ic="cognito-identity",wc=({region:e})=>({url:new ge(`https://cognito-identity.${e}.${Ri(e)}`)}),Ac=()=>e=>async function(n){return n.headers["cache-control"]="no-store",e(n)},Vi=Rt(Sn,[Ac]),An={service:Ic,endpointResolver:wc,retryDecider:In(Oe),computeDelay:bn,userAgentValue:Xe(),cache:"no-store"};gc(()=>{An.userAgentValue=Xe()});const ji=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),Bi=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),_c=(e,t)=>{const n=ji("GetId"),r=JSON.stringify(e);return Bi(t,n,r)},Nc=async e=>{if(e.statusCode>=300)throw await Oe(e);return{IdentityId:(await Dt(e)).IdentityId,$metadata:xt(e)}},Oc=Tn(Vi,_c,Nc,An),kc=(e,t)=>{const n=ji("GetCredentialsForIdentity"),r=JSON.stringify(e);return Bi(t,n,r)},Cc=async e=>{if(e.statusCode>=300)throw await Oe(e);{const t=await Dt(e);return{IdentityId:t.IdentityId,Credentials:xc(t.Credentials),$metadata:xt(e)}}},xc=({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:n,Expiration:r&&new Date(r*1e3)}),Ir=Tn(Vi,kc,Cc,An);class st extends X{constructor(){super({name:St.PlatformNotSupported,message:"Function not supported on current platform"})}}class Gi{constructor(t){this.storage=t}async setItem(t,n){if(!this.storage)throw new st;this.storage.setItem(t,n)}async getItem(t){if(!this.storage)throw new st;return this.storage.getItem(t)}async removeItem(t){if(!this.storage)throw new st;this.storage.removeItem(t)}async clear(){if(!this.storage)throw new st;this.storage.clear()}}class qi{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){return this.storage.get(t)??null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const Dc=()=>typeof window<"u"&&window.localStorage?window.localStorage:new qi,Rc=()=>typeof window<"u"&&window.sessionStorage?window.sessionStorage:new qi;class Pc extends Gi{constructor(){super(Dc())}}class Lc extends Gi{constructor(){super(Rc())}}/*! js-cookie v3.0.5 | MIT */function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var Mc={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function cn(e,t){function n(i,o,s){if(!(typeof document>"u")){s=at({},t,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in s)s[c]&&(a+="; "+c,s[c]!==!0&&(a+="="+s[c].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+a}}function r(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],s={},a=0;a<o.length;a++){var c=o[a].split("="),u=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(s[l]=e.read(u,l),i===l)break}catch{}}return i?s[i]:s}}return Object.create({set:n,get:r,remove:function(i,o){n(i,"",at({},o,{expires:-1}))},withAttributes:function(i){return cn(this.converter,at({},this.attributes,i))},withConverter:function(i){return cn(at({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var ct=cn(Mc,{path:"/"});class wr{constructor(t={}){const{path:n,domain:r,expires:i,sameSite:o,secure:s}=t;if(this.domain=r,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?i:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?s:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(o==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(t,n){ct.set(t,n,this.getData())}async getItem(t){return ct.get(t)??null}async removeItem(t){ct.remove(t,this.getData())}async clear(){const t=ct.get(),n=Object.keys(t).map(r=>this.removeItem(r));await Promise.all(n)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}const wt=new Pc;new Lc;let ut;const Fc=new Uint8Array(16);function Uc(){if(!ut&&(ut=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ut))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ut(Fc)}const j=[];for(let e=0;e<256;++e)j.push((e+256).toString(16).slice(1));function $c(e,t=0){return j[e[t+0]]+j[e[t+1]]+j[e[t+2]]+j[e[t+3]]+"-"+j[e[t+4]]+j[e[t+5]]+"-"+j[e[t+6]]+j[e[t+7]]+"-"+j[e[t+8]]+j[e[t+9]]+"-"+j[e[t+10]]+j[e[t+11]]+j[e[t+12]]+j[e[t+13]]+j[e[t+14]]+j[e[t+15]]}const Kc=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ar={randomUUID:Kc};function Vc(e,t,n){if(Ar.randomUUID&&!t&&!e)return Ar.randomUUID();e=e||{};const r=e.random||(e.rng||Uc)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return $c(r)}const jc=Vc,Wi=e=>Object.keys(e).map(t=>t.toLowerCase()).sort().join(";"),Bc="X-Amz-Date",Gc="X-Amz-Security-Token",qc="authorization",Wc="host",Hc=Bc.toLowerCase(),Qc=Gc.toLowerCase(),Hi="aws4_request",Qi="AWS4-HMAC-SHA256",zc="AWS4",Jc="e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",Yc="UNSIGNED-PAYLOAD",Xc=(e,t,n)=>`${e}/${t}/${n}/${Hi}`,Zc=e=>{const t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}},eu=({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{const{accessKeyId:o,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:u}=Zc(t),l=Xc(u,n,r);return{accessKeyId:o,credentialScope:l,longDate:c,secretAccessKey:s,sessionToken:a,shortDate:u,signingRegion:n,signingService:r,uriEscapePath:i}},Pe=(e,t)=>{const n=new La(e??void 0);return n.update(t),n.digestSync()},un=(e,t)=>{const n=Pe(e,t);return Fa(n)},tu=e=>Object.entries(e).map(([t,n])=>({key:t.toLowerCase(),value:(n==null?void 0:n.trim().replace(/\s+/g," "))??""})).sort((t,n)=>t.key<n.key?-1:1).map(t=>`${t.key}:${t.value}
`).join(""),nu=e=>Array.from(e).sort(([t,n],[r,i])=>t===r?n<i?-1:1:t<r?-1:1).map(([t,n])=>`${_r(t)}=${_r(n)}`).join("&"),_r=e=>encodeURIComponent(e).replace(/[!'()*]/g,ru),ru=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,iu=(e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/",ou=e=>e==null?Jc:su(e)?un(null,e):Yc,su=e=>typeof e=="string"||ArrayBuffer.isView(e)||au(e),au=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",cu=({body:e,headers:t,method:n,url:r},i=!0)=>[n,iu(r.pathname,i),nu(r.searchParams),tu(t),Wi(t),ou(e)].join(`
`),uu=(e,t,n,r)=>{const i=`${zc}${e}`,o=Pe(i,t),s=Pe(o,n),a=Pe(s,r);return Pe(a,Hi)},lu=(e,t,n)=>[Qi,e,t,n].join(`
`),du=(e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:s,uriEscapePath:a})=>{const c=cu(e,a),u=un(null,c),l=lu(n,t,u);return un(uu(r,i,o,s),l)},zi=(e,t)=>{const n=eu(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:s}=n,a={...e.headers};a[Wc]=e.url.host,a[Hc]=o,s&&(a[Qc]=s);const c={...e,headers:a},u=du(c,n),l=`Credential=${r}/${i}`,d=`SignedHeaders=${Wi(a)}`,f=`Signature=${u}`;return a[qc]=`${Qi} ${l}, ${d}, ${f}`,c},Ji=e=>new Date(Date.now()+e),fu=5*60*1e3,hu=(e,t)=>Math.abs(Ji(t).getTime()-e)>=fu,pu=(e,t)=>hu(e,t)?e-Date.now():t,yu=({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return o=>async function(a){i=i??0;const c={credentials:typeof e=="function"?await e():e,signingDate:Ji(i),signingRegion:t,signingService:n,uriEscapePath:r},u=await zi(a,c),l=await o(u),d=mu(l);return d&&(i=pu(Date.parse(d),i)),l}},mu=({headers:e}={})=>(e==null?void 0:e.date)??(e==null?void 0:e.Date)??(e==null?void 0:e["x-amz-date"]),gu=Rt(Mi,[Li,Pi,yu]),vu=()=>{if(typeof self>"u")return!1;const e=self;return typeof e.WorkerGlobalScope<"u"&&self instanceof e.WorkerGlobalScope};class Eu extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}const Tu=(e,t,n=Fi,r)=>Ia(e,t,Ui(n),r),Su=e=>{let t;return async(...n)=>t||(t=new Promise((r,i)=>{e(...n).then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{t=void 0})}),t)};class At extends X{get response(){return this._response?bu(this._response):void 0}constructor(t){super(t),this.constructor=At,Object.setPrototypeOf(this,At.prototype),t.response&&(this._response=t.response)}}const bu=e=>({...e,headers:{...e.headers}});class we{networkMonitor(t){const n=vu()?self:typeof window<"u"&&window;return n?new W(r=>{r.next({online:n.navigator.onLine});const i=()=>{r.next({online:!0})},o=()=>{r.next({online:!1})};return n.addEventListener("online",i),n.addEventListener("offline",o),we._observers.push(r),()=>{n.removeEventListener("online",i),n.removeEventListener("offline",o),we._observers=we._observers.filter(s=>s!==r)}}):ua([{online:!0}])}static _observerOverride(t){for(const n of this._observers){if(n.closed){this._observers=this._observers.filter(r=>r!==n);continue}n!=null&&n.next&&n.next(t)}}}we._observers=[];function Iu(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const Nr={convert(e,{urlSafe:t}={urlSafe:!1}){const n=typeof e=="string"?e:Iu(e),r=ya()(n);return t?r.replace(/\+/g,"-").replace(/\//g,"_"):r}};var ne;(function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"})(ne||(ne={}));var K;(function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"})(K||(K={}));var pe;(function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"})(pe||(pe={}));const _n=Symbol("amplify"),Nn=Symbol("authMode"),On=Symbol("authToken"),Yi=Symbol("headers");class Qe extends At{constructor(t){super(t),this.constructor=Qe,Object.setPrototypeOf(this,Qe.prototype)}}class ze extends Qe{constructor(t={}){super({name:"CanceledError",message:"Request is canceled by user",...t}),this.constructor=ze,Object.setPrototypeOf(this,ze.prototype)}}const wu=e=>!!e&&e instanceof ze;var ln;(function(e){e.InvalidApiName="InvalidApiName"})(ln||(ln={}));ln.InvalidApiName+"";const Xi=async e=>{var n;if(!e)return;const t=await Oe(Au(e));if(t){const r=await((n=e.body)==null?void 0:n.text());return _u(t,{statusCode:e.statusCode,headers:e.headers,body:r})}},Au=e=>{let t;const n=new Proxy(e.body,{get(i,o,s){return o==="json"?async()=>{t||(t=i.text());try{return JSON.parse(await t)}catch{return{}}}:o==="text"?async()=>(t||(t=i.text()),t):Reflect.get(i,o,s)}});return new Proxy(e,{get(i,o,s){return o==="body"?n:Reflect.get(i,o,s)}})},_u=(e,t)=>{const n=new Qe({name:e==null?void 0:e.name,message:e.message,underlyingError:e,response:t});return Object.assign(n,{$metadata:e.$metadata})},dn=new H("RestApis");function Nu(e,t){const n=c=>!!t,r=new AbortController,i=r.signal,o=t==null?void 0:t.signal;let s;const a=async()=>{try{const c=await(n(e)?e():e(i));if(c.statusCode>=300)throw await Xi(c);return c}catch(c){const u=o??i,l=s??u.reason;if(c.name==="AbortError"||(u==null?void 0:u.aborted)===!0){const d=new ze({...l&&{message:l},underlyingError:c});throw dn.debug(c),d}throw dn.debug(c),c}};if(n())return a();{const c=u=>{i.aborted!==!0&&(r.abort(u),u&&i.reason!==u&&(s=u))};return{response:a(),cancel:c}}}const Or="execute-api",Ou="us-east-1",ku=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/,Cu=(e,t)=>{var a,c,u;const{service:n=Or,region:r=Ou}=((u=(c=(a=t==null?void 0:t.amplify.getConfig())==null?void 0:a.API)==null?void 0:c.REST)==null?void 0:u[t==null?void 0:t.apiName])??{},{hostname:i}=e,[,o,s]=ku.exec(i)??[];return o===Or?{service:o,region:s??r}:o==="appsync-api"?{service:"appsync",region:s??r}:{service:n,region:r}},xu=(e,t)=>{const n={};for(const r in e)n[r.toLowerCase()]=e[r];return t&&(n["content-type"]="application/json; charset=UTF-8",t instanceof FormData&&delete n["content-type"]),n},Du=async(e,t,n)=>{const{url:r,method:i,headers:o,body:s,withCredentials:a,abortSignal:c}=t,u=s?s instanceof FormData?s:JSON.stringify(s??""):void 0,l=xu(o,s),d={url:r,headers:l,method:i,body:u},f={retryDecider:In(Xi),computeDelay:bn,withCrossDomainCredentials:a,abortSignal:c},h=Ru(d,n);let p;const m=await Pu(e);if(h&&m){const g=Cu(r),v=(n==null?void 0:n.service)??g.service,w=(n==null?void 0:n.region)??g.region;p=await gu(d,{...f,credentials:m,region:w,service:v})}else p=await Sn(d,{...f});return{statusCode:p.statusCode,headers:p.headers,body:p.body}},Ru=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,Pu=async e=>{try{const{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch{dn.debug("No credentials available, the request will be unsigned.")}return null},kn=new WeakMap,Lu=(e,{url:t,options:n,abortController:r})=>{const i=r??new AbortController,s=Nu(async()=>Du(e,{url:t,method:"POST",...n,abortSignal:i.signal},n==null?void 0:n.signingServiceInfo),i).finally(()=>{kn.delete(s)});return s},Mu=(e,t)=>{const n=kn.get(e);return n?(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0):!1},Fu=(e,t)=>{kn.set(e,t)},Uu=Lu,$u=5e3,Ku=[400,401,403],Vu="ConnectionStateChange";var re;(function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"})(re||(re={}));var de;(function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"})(de||(de={}));var Q;(function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"})(Q||(Q={}));const ju={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},kr=15e3,Bu=15e3,Cr=5*60*1e3,Gu=65*1e3,qu=5*1e3,Wu=60*1e3,xr=()=>new we().networkMonitor(),G={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class Hu{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=xr().subscribe(({online:t})=>{var n;this.record(t?G.ONLINE:G.OFFLINE),(n=this._initialNetworkStateSubscription)==null||n.unsubscribe()}),this._linkedConnectionStateObservable=new W(t=>{t.next(this._linkedConnectionState),this._linkedConnectionStateObserver=t})}enableNetworkMonitoring(){var t;(t=this._initialNetworkStateSubscription)==null||t.unsubscribe(),this._networkMonitoringSubscription===void 0&&(this._networkMonitoringSubscription=xr().subscribe(({online:n})=>{this.record(n?G.ONLINE:G.OFFLINE)}))}disableNetworkMonitoring(){var t;(t=this._networkMonitoringSubscription)==null||t.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){let t;return this._linkedConnectionStateObservable.pipe(Ii(n=>this.connectionStatesTranslator(n))).pipe(la(n=>{const r=n!==t;return t=n,r}))}record(t){var r;t.intendedConnectionState==="connected"?this.enableNetworkMonitoring():t.intendedConnectionState==="disconnected"&&this.disableNetworkMonitoring();const n={...this._linkedConnectionState,...t};this._linkedConnectionState={...n},(r=this._linkedConnectionStateObserver)==null||r.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:t,networkState:n,intendedConnectionState:r,keepAliveState:i}){return t==="connected"&&n==="disconnected"?K.ConnectedPendingNetwork:t==="connected"&&r==="disconnected"?K.ConnectedPendingDisconnect:t==="disconnected"&&r==="connected"&&n==="disconnected"?K.ConnectionDisruptedPendingNetwork:t==="disconnected"&&r==="connected"?K.ConnectionDisrupted:t==="connected"&&i==="unhealthy"?K.ConnectedPendingKeepAlive:t==="connecting"?K.Connecting:t==="disconnected"?K.Disconnected:K.Connected}}var _e;(function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"})(_e||(_e={}));class Qu{constructor(){this.reconnectObservers=[]}addObserver(t){this.reconnectObservers.push(t)}record(t){t===_e.START_RECONNECT&&this.reconnectSetTimeoutId===void 0&&this.reconnectIntervalId===void 0&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},Wu)},qu)),t===_e.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(t=>{var n;(n=t.complete)==null||n.call(t)})}_triggerReconnect(){this.reconnectObservers.forEach(t=>{var n;(n=t.next)==null||n.call(t)})}}const C=new H("AWSAppSyncRealTimeProvider"),Dr=e=>{qe.dispatch("api",e,"PubSub",Ge)},zu=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,Ju="/realtime";class Yu{constructor(t={}){this.socketStatus=Q.CLOSED,this.keepAliveTimeout=Cr,this.subscriptionObserverMap=new Map,this.promiseArray=[],this.connectionStateMonitor=new Hu,this.reconnectionMonitor=new Qu,this.connectionStateMonitorSubscription=this.connectionStateMonitor.connectionStateObservable.subscribe(n=>{Dr({event:Vu,data:{provider:this,connectionState:n},message:`Connection state is ${n}`}),this.connectionState=n,n===K.ConnectionDisrupted&&this.reconnectionMonitor.record(_e.START_RECONNECT),[K.Connected,K.ConnectedPendingDisconnect,K.ConnectedPendingKeepAlive,K.ConnectedPendingNetwork,K.ConnectionDisruptedPendingNetwork,K.Disconnected].includes(n)&&this.reconnectionMonitor.record(_e.HALT_RECONNECT)})}close(){this.socketStatus=Q.CLOSED,this.connectionStateMonitor.record(G.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()}getNewWebSocket(t,n){return new WebSocket(t,n)}getProviderName(){return"AWSAppSyncRealTimeProvider"}isCustomDomain(t){return t.match(zu)===null}subscribe(t,n){const{appSyncGraphqlEndpoint:r,region:i,query:o,variables:s,authenticationType:a,additionalHeaders:c,apiKey:u,authToken:l,libraryConfigHeaders:d}=t||{};return new W(f=>{if(!t||!r)f.error({errors:[{...new be("Subscribe only available for AWS AppSync endpoint")}]}),f.complete();else{let h=!1;const p=jc(),m=()=>{h||(h=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:{query:o,variables:s,region:i,authenticationType:a,appSyncGraphqlEndpoint:r,additionalHeaders:c,apiKey:u,authToken:l,libraryConfigHeaders:d},observer:f,subscriptionId:p,customUserAgentDetails:n}).catch(w=>{C.debug(`${ne.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${w}`),this.connectionStateMonitor.record(G.CLOSED)}).finally(()=>{h=!1}))};let g;return g=new W(v=>{this.reconnectionMonitor.addObserver(v)}).subscribe(()=>{m()}),m(),async()=>{g==null||g.unsubscribe();try{await this._waitForSubscriptionToBeConnected(p);const{subscriptionState:v}=this.subscriptionObserverMap.get(p)||{};if(!v)return;if(v===de.CONNECTED)this._sendUnsubscriptionMessage(p);else throw new Error("Subscription never connected")}catch(v){C.debug(`Error while unsubscribing ${v}`)}finally{this._removeSubscriptionObserver(p)}}}})}async _startSubscriptionWithAWSAppSyncRealTime({options:t,observer:n,subscriptionId:r,customUserAgentDetails:i}){const{appSyncGraphqlEndpoint:o,authenticationType:s,query:a,variables:c,apiKey:u,region:l,libraryConfigHeaders:d=()=>({}),additionalHeaders:f={},authToken:h}=t;let p={};typeof f=="function"?p=await f({url:o||"",queryString:a||""}):p=f,h&&(p={...p,Authorization:h});const m=de.PENDING,g={query:a,variables:c};this.subscriptionObserverMap.set(r,{observer:n,query:a??"",variables:c??{},subscriptionState:m,startAckTimeoutId:void 0});const v=JSON.stringify(g),w={...await this._awsRealTimeHeaderBasedAuth({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,payload:v,canonicalUri:"",region:l,additionalCustomHeaders:p}),...await d(),...p,[fa]:Xe(i)},b={id:r,payload:{data:v,extensions:{authorization:{...w}}},type:re.GQL_START},O=JSON.stringify(b);try{this.connectionStateMonitor.record(G.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:s,region:l,additionalCustomHeaders:p})}catch(A){this._logStartSubscriptionError(r,n,A);return}const{subscriptionFailedCallback:I,subscriptionReadyCallback:T}=this.subscriptionObserverMap.get(r)??{};this.subscriptionObserverMap.set(r,{observer:n,subscriptionState:m,query:a??"",variables:c??{},subscriptionReadyCallback:T,subscriptionFailedCallback:I,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck.call(this,r)},Bu)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(O)}_logStartSubscriptionError(t,n,r){C.debug({err:r});const i=String(r.message??"");if(Promise.resolve(this.connectionStateMonitor.record(G.CLOSED)),this.connectionState!==K.ConnectionDisruptedPendingNetwork){Oi(r)?n.error({errors:[{...new be(`${ne.CONNECTION_FAILED}: ${i}`)}]}):C.debug(`${ne.CONNECTION_FAILED}: ${i}`);const{subscriptionFailedCallback:o}=this.subscriptionObserverMap.get(t)||{};typeof o=="function"&&o()}}async _waitForSubscriptionToBeConnected(t){const n=this.subscriptionObserverMap.get(t);if(n){const{subscriptionState:r}=n;if(r===de.PENDING)return new Promise((i,o)=>{const{observer:s,subscriptionState:a,variables:c,query:u}=n;this.subscriptionObserverMap.set(t,{observer:s,subscriptionState:a,variables:c,query:u,subscriptionReadyCallback:i,subscriptionFailedCallback:o})})}}_sendUnsubscriptionMessage(t){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===Q.READY){const n={id:t,type:re.GQL_STOP},r=JSON.stringify(n);this.awsRealTimeSocket.send(r)}}catch(n){C.debug({err:n})}}_removeSubscriptionObserver(t){this.subscriptionObserverMap.delete(t),setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=Q.CLOSED;return}if(this.connectionStateMonitor.record(G.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{C.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);const t=this.awsRealTimeSocket;t.onclose=null,t.onerror=null,t.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=Q.CLOSED,this.connectionStateMonitor.record(G.CLOSED)}}}_handleIncomingSubscriptionMessage(t){if(typeof t.data!="string")return;C.debug(`subscription message from AWS AppSync RealTime: ${t.data}`);const{id:n="",payload:r,type:i}=JSON.parse(String(t.data)),{observer:o=null,query:s="",variables:a={},startAckTimeoutId:c,subscriptionReadyCallback:u,subscriptionFailedCallback:l}=this.subscriptionObserverMap.get(n)||{};if(C.debug({id:n,observer:o,query:s,variables:a}),i===re.GQL_DATA&&r&&r.data){o?o.next(r):C.debug(`observer not found for id: ${n}`);return}if(i===re.GQL_START_ACK){C.debug(`subscription ready for ${JSON.stringify({query:s,variables:a})}`),typeof u=="function"&&u(),c&&clearTimeout(c),Dr({event:ne.SUBSCRIPTION_ACK,data:{query:s,variables:a},message:"Connection established for subscription"});const d=de.CONNECTED;o&&this.subscriptionObserverMap.set(n,{observer:o,query:s,variables:a,startAckTimeoutId:void 0,subscriptionState:d,subscriptionReadyCallback:u,subscriptionFailedCallback:l}),this.connectionStateMonitor.record(G.CONNECTION_ESTABLISHED);return}if(i===re.GQL_CONNECTION_KEEP_ALIVE){this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout(()=>this._errorDisconnect(ne.TIMEOUT_DISCONNECT),this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout(()=>{this.connectionStateMonitor.record(G.KEEP_ALIVE_MISSED)},Gu),this.connectionStateMonitor.record(G.KEEP_ALIVE);return}if(i===re.GQL_ERROR){const d=de.FAILED;o&&(this.subscriptionObserverMap.set(n,{observer:o,query:s,variables:a,startAckTimeoutId:c,subscriptionReadyCallback:u,subscriptionFailedCallback:l,subscriptionState:d}),C.debug(`${ne.CONNECTION_FAILED}: ${JSON.stringify(r)}`),o.error({errors:[{...new be(`${ne.CONNECTION_FAILED}: ${JSON.stringify(r)}`)}]}),c&&clearTimeout(c),typeof l=="function"&&l())}}_errorDisconnect(t){C.debug(`Disconnect error: ${t}`),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(G.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=Q.CLOSED}_timeoutStartSubscriptionAck(t){const n=this.subscriptionObserverMap.get(t);if(n){const{observer:r,query:i,variables:o}=n;if(!r)return;this.subscriptionObserverMap.set(t,{observer:r,query:i,variables:o,subscriptionState:de.FAILED}),this.connectionStateMonitor.record(G.CLOSED),C.debug("timeoutStartSubscription",JSON.stringify({query:i,variables:o}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:t,authenticationType:n,apiKey:r,region:i,additionalCustomHeaders:o}){if(this.socketStatus!==Q.READY)return new Promise(async(s,a)=>{if(this.promiseArray.push({res:s,rej:a}),this.socketStatus===Q.CLOSED)try{this.socketStatus=Q.CONNECTING;const c="{}",u=await this._awsRealTimeHeaderBasedAuth({authenticationType:n,payload:c,canonicalUri:"/connect",apiKey:r,appSyncGraphqlEndpoint:t,region:i,additionalCustomHeaders:o}),l=u?JSON.stringify(u):"",d=Nr.convert(l),f=Nr.convert(c);let h=t??"";this.isCustomDomain(h)?h=h.concat(Ju):h=h.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta");const p="wss://";h=h.replace("https://",p).replace("http://",p);const m=`${h}?header=${d}&payload=${f}`;await this._initializeRetryableHandshake(m),this.promiseArray.forEach(({res:g})=>{C.debug("Notifying connection successful"),g()}),this.socketStatus=Q.READY,this.promiseArray=[]}catch(c){C.debug("Connection exited with",c),this.promiseArray.forEach(({rej:u})=>u(c)),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=Q.CLOSED}})}async _initializeRetryableHandshake(t){C.debug("Initializaling retryable Handshake"),await Tu(this._initializeHandshake.bind(this),[t],$u)}async _initializeHandshake(t){C.debug(`Initializing handshake ${t}`);try{await new Promise((n,r)=>{const i=this.getNewWebSocket(t,"graphql-ws");i.onerror=()=>{C.debug("WebSocket connection error")},i.onclose=()=>{r(new Error("Connection handshake error"))},i.onopen=()=>(this.awsRealTimeSocket=i,n())}),await new Promise((n,r)=>{if(this.awsRealTimeSocket){let i=!1;this.awsRealTimeSocket.onerror=a=>{C.debug(`WebSocket error ${JSON.stringify(a)}`)},this.awsRealTimeSocket.onclose=a=>{C.debug(`WebSocket closed ${a.reason}`),r(new Error(JSON.stringify(a)))},this.awsRealTimeSocket.onmessage=a=>{if(typeof a.data!="string")return;C.debug(`subscription message from AWS AppSyncRealTime: ${a.data} `);const c=JSON.parse(a.data),{type:u,payload:{connectionTimeoutMs:l=Cr}={}}=c;if(u===re.GQL_CONNECTION_ACK){i=!0,this.awsRealTimeSocket&&(this.keepAliveTimeout=l,this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=d=>{C.debug(d),this._errorDisconnect(ne.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=d=>{C.debug(`WebSocket closed ${d.reason}`),this._errorDisconnect(ne.CONNECTION_CLOSED)}),n("Cool, connected to AWS AppSyncRealTime");return}if(u===re.GQL_CONNECTION_ERROR){const{payload:{errors:[{errorType:d="",errorCode:f=0}={}]=[]}={}}=c;r({errorType:d,errorCode:f})}};const o={type:re.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(o));const s=a=>{a||(this.connectionStateMonitor.record(G.CONNECTION_FAILED),r(new Error(`Connection timeout: ack from AWSAppSyncRealTime was not received after ${kr} ms`)))};setTimeout(()=>s(i),kr)}})}catch(n){const{errorType:r,errorCode:i}=n;throw Ku.includes(i)?new Eu(r):r?new Error(r):n}}async _awsRealTimeHeaderBasedAuth({apiKey:t,authenticationType:n,payload:r,canonicalUri:i,appSyncGraphqlEndpoint:o,region:s,additionalCustomHeaders:a}){const c={apiKey:this._awsRealTimeApiKeyHeader.bind(this),iam:this._awsRealTimeIAMHeader.bind(this),oidc:this._awsAuthTokenHeader.bind(this),userPool:this._awsAuthTokenHeader.bind(this),lambda:this._customAuthHeader,none:this._customAuthHeader};if(!n||!c[n]){C.debug(`Authentication type ${n} not supported`);return}else{const u=c[n],l=o?new ge(o).host:void 0;C.debug(`Authenticating with ${JSON.stringify(n)}`);let d;return n==="apiKey"&&(d=t),await u({payload:r,canonicalUri:i,appSyncGraphqlEndpoint:o,apiKey:d,region:s,host:l,additionalCustomHeaders:a})}}async _awsAuthTokenHeader({host:t}){var r,i;const n=await sr();return{Authorization:(i=(r=n==null?void 0:n.tokens)==null?void 0:r.accessToken)==null?void 0:i.toString(),host:t}}async _awsRealTimeApiKeyHeader({apiKey:t,host:n}){const i=new Date().toISOString().replace(/[:\-]|\.\d{3}/g,"");return{host:n,"x-amz-date":i,"x-api-key":t}}async _awsRealTimeIAMHeader({payload:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:i}){const o={region:i,service:"appsync"},s=(await sr()).credentials,a={url:`${r}${n}`,data:t,method:"POST",headers:{...ju}};return zi({headers:a.headers,method:a.method,url:new ge(a.url),body:a.data},{credentials:s,signingRegion:o.region,signingService:o.service}).headers}_customAuthHeader({host:t,additionalCustomHeaders:n}){if(!(n!=null&&n.Authorization))throw new Error("No auth token specified");return{Authorization:n.Authorization,host:t}}}class _t extends X{constructor(t){super(t),this.constructor=_t,Object.setPrototypeOf(this,_t.prototype)}}var Ae;(function(e){e.NoAuthSession="NoAuthSession",e.NoRegion="NoRegion",e.NoCustomEndpoint="NoCustomEndpoint"})(Ae||(Ae={}));const Xu={[Ae.NoAuthSession]:{message:"Auth session should not be empty."},[Ae.NoRegion]:{message:"Missing region."},[Ae.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}};function Zu(e,t){const{message:n,recoverySuggestion:r}=Xu[t];if(!e)throw new _t({name:t,message:n,recoverySuggestion:r})}const el=new H("GraphQLAPI resolveConfig"),zt=e=>{var c,u;const t=e.getConfig();(c=t.API)!=null&&c.GraphQL||el.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");const{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}=((u=t.API)==null?void 0:u.GraphQL)??{};return Zu(!(!r&&i),Ae.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}},Rr=e=>{var r,i,o,s,a,c;const t=(o=(i=(r=e.libraryOptions)==null?void 0:r.API)==null?void 0:i.GraphQL)==null?void 0:o.headers,n=(c=(a=(s=e.libraryOptions)==null?void 0:s.API)==null?void 0:a.GraphQL)==null?void 0:c.withCredentials;return{headers:t,withCredentials:n}};function Pr(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(t=>{tl(t)&&(t.message="Unauthorized",t.recoverySuggestion=`If you're calling an Amplify-generated API, make sure to set the "authMode" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')`)}),e}function tl(e){var t,n,r,i;return!!((n=(t=e==null?void 0:e.originalError)==null?void 0:t.name)!=null&&n.startsWith("UnauthorizedException")||(r=e.message)!=null&&r.startsWith("Connection failed:")&&((i=e.message)!=null&&i.includes("Permission denied")))}const nl="x-amz-user-agent";new H("GraphQLAPI");const rl=e=>typeof e!="function";class Zi{constructor(){this.appSyncRealTime=new Yu,this._api={post:Uu,cancelREST:Mu,isCancelErrorREST:wu,updateRequestToBeCancellable:Fu}}getModuleName(){return"InternalGraphQLAPI"}async _headerBasedAuth(t,n,r={}){var c;const{region:i,endpoint:o,apiKey:s}=zt(t);let a={};switch(n){case"apiKey":if(!s)throw new Error(pe.NO_API_KEY);a={"X-Api-Key":s};break;case"iam":if((await t.Auth.fetchAuthSession()).credentials===void 0)throw new Error(pe.NO_CREDENTIALS);break;case"oidc":case"userPool":try{let l;if(l=(c=(await t.Auth.fetchAuthSession()).tokens)==null?void 0:c.accessToken.toString(),!l)throw new Error(pe.NO_FEDERATED_JWT);a={Authorization:l}}catch{throw new Error(pe.NO_CURRENT_USER)}break;case"lambda":if(typeof r=="object"&&!r.Authorization)throw new Error(pe.NO_AUTH_TOKEN);a={Authorization:r.Authorization};break}return a}getGraphqlOperationType(t){const r=Gt(t).definitions,[{operation:i}]=r;return i}graphql(t,{query:n,variables:r={},authMode:i,authToken:o},s,a){const c=Gt(typeof n=="string"?n:xe(n)),[u={}]=c.definitions.filter(f=>f.kind==="OperationDefinition"),{operation:l}=u,d=s||{};switch(l){case"query":case"mutation":const f=new AbortController;let h;return rl(t)?h=this._graphql(t,{query:c,variables:r,authMode:i},d,f,a,o):h=t(async m=>await this._graphql(m,{query:c,variables:r,authMode:i},d,f,a,o)),this._api.updateRequestToBeCancellable(h,f),h;case"subscription":return this._graphqlSubscribe(t,{query:c,variables:r,authMode:i},d,a,o);default:throw new Error(`invalid operation type: ${l}`)}}async _graphql(t,{query:n,variables:r,authMode:i},o={},s,a,c){const{region:u,endpoint:l,customEndpoint:d,customEndpointRegion:f,defaultAuthMode:h}=zt(t),p=i||h||"iam",{headers:m,withCredentials:g}=Rr(t);let v;if(typeof o=="function"){const k={method:"POST",url:new ge(d||l||"").toString(),queryString:xe(n)};v=await o(k)}else v=o;c&&(v={...v,Authorization:c});const w={...!d&&await this._headerBasedAuth(t,p,v),...d&&(f?await this._headerBasedAuth(t,p,v):{})||{},...m&&await m({query:xe(n),variables:r}),...v,...!d&&{[nl]:Xe(a)}},b={query:xe(n),variables:r||null};let O;d&&!f||p!=="oidc"&&p!=="userPool"&&p!=="iam"&&p!=="lambda"?O=void 0:O={service:f?"execute-api":"appsync",region:f||u};const I=d||l;if(!I){const k=new be("No graphql endpoint provided.");throw{data:{},errors:[k]}}let T;try{const{body:k}=await this._api.post(t,{url:new ge(I),options:{headers:w,body:b,signingServiceInfo:O,withCredentials:g},abortController:s});T=await k.json()}catch(k){if(this.isCancelError(k))throw k;T={data:{},errors:[new be(k.message,null,null,null,null,k)]}}const{errors:A}=T;if(A&&A.length)throw Pr(T);return T}isCancelError(t){return this._api.isCancelErrorREST(t)}cancel(t,n){return this._api.cancelREST(t,n)}_graphqlSubscribe(t,{query:n,variables:r,authMode:i},o={},s,a){const c=zt(t),{headers:u}=Rr(t);return this.appSyncRealTime.subscribe({query:xe(n),variables:r,appSyncGraphqlEndpoint:c==null?void 0:c.endpoint,region:c==null?void 0:c.region,authenticationType:i||(c==null?void 0:c.defaultAuthMode),apiKey:c==null?void 0:c.apiKey,additionalHeaders:o,authToken:a,libraryConfigHeaders:u},s).pipe(wi(l=>{throw l.errors?Pr(l):l}))}}new Zi;class il extends Zi{getModuleName(){return"GraphQLAPI"}graphql(t,n,r){return super.graphql(t,n,r,{category:sn.API,action:an.GraphQl})}isCancelError(t){return super.isCancelError(t)}cancel(t,n){return super.cancel(t,n)}}const Cn=new il;function ol(e,t){return e.authMode=e.authMode||this[Nn],e.authToken=e.authToken||this[On],Cn.graphql(this[_n],e,t)}function sl(e,t){return Cn.cancel(e,t)}function al(e){return Cn.isCancelError(e)}const eo=e=>{const t=e.modelIntrospection;if(!t)return{};const n={};for(const[r,i]of Object.entries(t.enums))n[i.name]={values:()=>i.values};return n};function to(e){const t=new Set;for(const n of e.attributes||[])if(cl(n))for(const r of n.properties.rules)r.allow==="owner"&&t.add(r.ownerField||"owner");return Array.from(t)}function cl(e){var t,n;return(e==null?void 0:e.type)==="auth"&&typeof(e==null?void 0:e.properties)=="object"&&Array.isArray((t=e==null?void 0:e.properties)==null?void 0:t.rules)?((n=e==null?void 0:e.properties)==null?void 0:n.rules).every(r=>!!r.allow):!1}const Ue={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},Ne=e=>{const t={};return Object.entries(e).forEach(([n,r])=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null){if(r.items!==void 0){t[n]=r.items.map(i=>Ne(i));return}t[n]=Ne(r);return}t[n]=r}),t};function Ze(e,t,n,r,i,o,s=!1){const a=r.models[t],c=a.fields,u=Object.entries(c).filter(([l,d])=>{var f;return((f=d==null?void 0:d.type)==null?void 0:f.model)!==void 0}).map(([l])=>l);return n.map(l=>{var f,h;const d={};for(const p of u){const m=c[p],v=(m==null?void 0:m.type).model,w=r.models[v],b=w.primaryKeyInfo.primaryKeyFieldName,O=w.primaryKeyInfo.sortKeyFieldNames,I=(f=m.association)==null?void 0:f.connectionType;let T=[];m.association&&"associatedWith"in m.association&&(T=m.association.associatedWith);let A=[];switch(m.association&&"targetNames"in m.association&&(A=m.association.targetNames),I){case Ue.HAS_ONE:case Ue.BELONGS_TO:const k=O.reduce((_,N)=>{if(l[N])return _[N]=l[N]},{});s?d[p]=(_,N)=>{if(l[A[0]])return e.models[v].get(_,{[b]:l[A[0]],...k},{authMode:(N==null?void 0:N.authMode)||i,authToken:(N==null?void 0:N.authToken)||o})}:d[p]=_=>{if(l[A[0]])return e.models[v].get({[b]:l[A[0]],...k},{authMode:(_==null?void 0:_.authMode)||i,authToken:(_==null?void 0:_.authToken)||o})};break;case Ue.HAS_MANY:const x=a.primaryKeyInfo.primaryKeyFieldName,J=a.primaryKeyInfo.sortKeyFieldNames,ce=w.fields[T[0]];if(ce.type.model){let _=[];ce.association&&"targetNames"in ce.association&&(_=(h=ce.association)==null?void 0:h.targetNames);const N=_.map(($,V)=>V===0?{[$]:{eq:l[x]}}:{[$]:{eq:l[J[V-1]]}});s?d[p]=($,V)=>l[x]?e.models[v].list($,{filter:{and:N},limit:V==null?void 0:V.limit,nextToken:V==null?void 0:V.nextToken,authMode:(V==null?void 0:V.authMode)||i,authToken:(V==null?void 0:V.authToken)||o}):[]:d[p]=$=>l[x]?e.models[v].list({filter:{and:N},limit:$==null?void 0:$.limit,nextToken:$==null?void 0:$.nextToken,authMode:($==null?void 0:$.authMode)||i,authToken:($==null?void 0:$.authToken)||o}):[];break}const F=T.map((_,N)=>N===0?{[_]:{eq:l[x]}}:{[_]:{eq:l[J[N-1]]}});s?d[p]=(_,N)=>l[x]?e.models[v].list(_,{filter:{and:F},limit:N==null?void 0:N.limit,nextToken:N==null?void 0:N.nextToken,authMode:(N==null?void 0:N.authMode)||i,authToken:(N==null?void 0:N.authToken)||o}):[]:d[p]=_=>l[x]?e.models[v].list({filter:{and:F},limit:_==null?void 0:_.limit,nextToken:_==null?void 0:_.nextToken,authMode:(_==null?void 0:_.authMode)||i,authToken:(_==null?void 0:_.authToken)||o}):[];break}}return{...l,...d}})}const no={CREATE:{operationPrefix:"create",usePlural:!1},READ:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVE_QUERY:{operationPrefix:"observeQuery",usePlural:!1}},fn="*";function ul(e){const{fields:t}=e,n=Object.values(t).map(({type:r,name:i})=>(typeof r=="string"||typeof r=="object"&&typeof(r==null?void 0:r.enum)=="string")&&i).filter(Boolean);return Array.from(new Set(n))}function ro(e){const{fields:t}=e,n=Object.values(t).map(({type:i,name:o})=>{if(typeof i=="string")return o;if(typeof i=="object"){if(typeof(i==null?void 0:i.enum)=="string")return o;if(typeof(i==null?void 0:i.nonModel)=="string")return`${o}.${fn}`}}).filter(Boolean),r=to(e);return Array.from(new Set(n.concat(r)))}const Lt="";function ll(e,t,n){const r=(i,o)=>{var g,v,w,b,O,I;const[s,...a]=i.split("."),c=a[0],u=e.models[o],l=u==null?void 0:u.fields,d=(v=(g=l==null?void 0:l[s])==null?void 0:g.type)==null?void 0:v.model,f=e.models[d],h=(b=(w=l==null?void 0:l[s])==null?void 0:w.type)==null?void 0:b.nonModel,p=e.nonModels[h],m=f?"model":p?"nonModel":"field";if(m==="nonModel"){let T={};if(!c)throw Error(`${s} must declare a wildcard (*) or a field of custom type ${h}`);return c===fn?T={[s]:fl(p)}:T={[s]:r(a.join("."),h)},T}else if(m==="model"){let T={};if(!c)throw Error(`${s} must declare a wildcard (*) or a field of model ${d}`);if(c===fn){const A=e.models[d];T={[s]:dl(A)}}else T={[s]:r(a.join("."),d)};return(O=l[s])!=null&&O.isArray&&(T={[s]:{items:T[s]}}),T}else{const T=l==null?void 0:l[s],A=e.nonModels[o],k=(I=A==null?void 0:A.fields)==null?void 0:I[s];if(A){if(!k)throw Error(`${s} is not a field of custom type ${o}`)}else{const x=to(u).includes(s);if(!T&&!x)throw Error(`${s} is not a field of model ${o}`)}return{[s]:Lt}}};return n.reduce((i,o)=>io(r(o,t),i),{})}const dl=e=>ro(e).reduce((r,i)=>(r[i]=Lt,r),{}),fl=e=>ul(e).reduce((r,i)=>(r[i]=Lt,r),{});function hn(e){const t=[];return Object.entries(e).forEach(([n,r])=>{r===Lt?t.push(n):typeof r=="object"&&r!==null&&(r!=null&&r.items?t.push(n,"{","items","{",hn(r.items),"}","}"):t.push(n,"{",hn(r),"}"))}),t.join(" ")}function io(e,t){const n=r=>r&&typeof r=="object";for(const r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&n(t[r])?io(e[r],t[r]):t[r]=e[r]);return t}function hl(e,t,n){const r=e.models[t],i=ll(e,t,n??ro(r));return hn(i)}function Mt(e,t,n,r,i){const o=e.models[t],{name:s,pluralName:a,fields:c,primaryKeyInfo:{isCustomPrimaryKey:u,primaryKeyFieldName:l,sortKeyFieldNames:d}}=o,{operationPrefix:f,usePlural:h}=no[n],{selectionSet:p}=r||{};let m,g;if(f)m=`${f}${h?a:s}`;else if(i){const{queryField:T,pk:A,sk:k=[]}=i;m=T;const x=k.reduce((J,ce)=>{const Ce=c[ce].type;return J[ce]=`Model${Ce}KeyConditionInput`,J},{});g={[A]:`${c[A].type}!`,...x}}else throw new Error("Error generating GraphQL Document - invalid operation name");let v,w,b;const O=hl(e,t,p);switch(n){case"CREATE":case"UPDATE":case"DELETE":b??(b={input:`${f.charAt(0).toLocaleUpperCase()+f.slice(1)}${s}Input!`}),v??(v="mutation");case"READ":b??(b=u?[l,...d].reduce((T,A)=>(T[A]=`${c[A].type}!`,T),{}):{[l]:`${c[l].type}!`}),w??(w=O);case"LIST":b??(b={filter:`Model${s}FilterInput`,limit:"Int",nextToken:"String"}),v??(v="query"),w??(w=`items { ${O} } nextToken __typename`);case"INDEX_QUERY":b??(b={...g,filter:`Model${s}FilterInput`,limit:"Int",nextToken:"String"}),v??(v="query"),w??(w=`items { ${O} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":b??(b={filter:`ModelSubscription${s}FilterInput`}),v??(v="subscription"),w??(w=O);break;case"OBSERVE_QUERY":default:throw new Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${v}${b?`(${Object.entries(b).map(([T,A])=>`$${T}: ${A}`)})`:""} { ${m}${b?`(${Object.keys(b).map(T=>`${T}: $${T}`)})`:""} { ${w} } }`}function Ft(e,t,n,r,i){const{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=e;let u={};switch(t){case"CREATE":u={input:n?Lr(n,e,r):{}};break;case"UPDATE":u={input:n?Object.fromEntries(Object.entries(Lr(n,e,r)).filter(([h])=>{const{isReadOnly:p}=o[h];return!p})):{}};break;case"READ":case"DELETE":n&&(u=s?[a,...c].reduce((h,p)=>(h[p]=n[p],h),{}):{[a]:n[a]}),t==="DELETE"&&(u={input:u});break;case"LIST":n!=null&&n.filter&&(u.filter=n.filter),n!=null&&n.nextToken&&(u.nextToken=n.nextToken),n!=null&&n.limit&&(u.limit=n.limit);break;case"INDEX_QUERY":const{pk:l,sk:d=[]}=i;u[l]=n[l];for(const h of d)u[h]=n[h];n!=null&&n.filter&&(u.filter=n.filter),n!=null&&n.nextToken&&(u.nextToken=n.nextToken),n!=null&&n.limit&&(u.limit=n.limit);break;case"ONCREATE":case"ONUPDATE":case"ONDELETE":n!=null&&n.filter&&(u={filter:n.filter});break;case"OBSERVE_QUERY":throw new Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:const f=t;throw new Error(`Unhandled operation case: ${f}`)}return u}function Lr(e,t,n){const{fields:r}=t,i={};return Object.entries(e).forEach(([o,s])=>{var u,l;const a=(u=r[o])==null?void 0:u.type,c=a==null?void 0:a.model;if(c){const d=(l=r[o])==null?void 0:l.association,h=n.models[c].primaryKeyInfo;if((d==null?void 0:d.connectionType)===Ue.HAS_ONE){const p=d;p.targetNames.forEach((m,g)=>{const v=p.associatedWith[g];i[m]=s[v]})}(d==null?void 0:d.connectionType)===Ue.BELONGS_TO&&d.targetNames.forEach((m,g)=>{if(g===0){const v=h.primaryKeyFieldName;i[m]=s[v]}else{const v=h.sortKeyFieldNames[g-1];i[m]=s[v]}})}else i[o]=s}),i}function et(e,t={}){return{authMode:t.authMode||e[Nn],authToken:t.authToken||e[On]}}function tt(e,t){let n=e[Yi]||{};return t&&(n=t),n}function pl(e,t,n,r=!1){return r?async(s,a)=>Mr(e,t,n,a,s):async s=>Mr(e,t,n,s)}async function Mr(e,t,n,r,i){const{name:o}=n,s=Mt(t,o,"LIST",r),a=Ft(n,"LIST",r,t);try{const c=et(e,r),u=tt(e,r==null?void 0:r.headers),{data:l,extensions:d}=i?await e.graphql(i,{...c,query:s,variables:a},u):await e.graphql({...c,query:s,variables:a},u);if(l!==void 0){const[f]=Object.keys(l);if(l[f].items){const h=Ne(l)[f];return r!=null&&r.selectionSet?{data:h,nextToken:l[f].nextToken,extensions:d}:{data:Ze(e,o,h,t,c.authMode,c.authToken,!!i),nextToken:l[f].nextToken,extensions:d}}return{data:l[f],nextToken:l[f].nextToken,extensions:d}}}catch(c){if(c.errors)return c;throw c}}function yl(e,t,n,r,i=!1){return i?async(a,c,u)=>Fr(e,t,n,r,{...c,...u},a):async(a,c)=>Fr(e,t,n,r,{...a,...c})}function ml(e,t,n){const{data:r,extensions:i}=e,[o]=Object.keys(r);if(r[o].items){const s=Ne(r)[o];return{data:t?s:n(s),nextToken:r[o].nextToken,extensions:i}}return{data:r[o],nextToken:r[o].nextToken,extensions:i}}function gl(e){if(e.errors)return e;throw e}async function Fr(e,t,n,r,i,o){const{name:s}=n,a=Mt(t,s,"INDEX_QUERY",i,r),c=Ft(n,"INDEX_QUERY",i,t,r),u=et(e,i),l=d=>Ze(e,s,d,t,u.authMode,u.authToken,!!o);try{const d=tt(e,i==null?void 0:i.headers),h=[{...u,query:a,variables:c},d];o!==void 0&&h.unshift(o);const p=await e.graphql(...h);if(p.data!==void 0)return ml(p,i==null?void 0:i.selectionSet,l)}catch(d){return gl(d)}}function vl(e,t,n,r,i=!1){return i?async(a,c,u)=>Ur(e,t,n,c,u,r,a):async(a,c)=>Ur(e,t,n,a,c,r)}async function Ur(e,t,n,r,i,o,s){const{name:a}=n,c=Mt(t,a,o,i),u=Ft(n,o,r,t);try{const l=et(e,i),d=tt(e,i==null?void 0:i.headers),{data:f,extensions:h}=s?await e.graphql(s,{...l,query:c,variables:u},d):await e.graphql({...l,query:c,variables:u},d);if(f){const[p]=Object.keys(f),m=Ne(f)[p];if(i!=null&&i.selectionSet)return{data:m,extensions:h};{const[g]=Ze(e,a,[m],t,l.authMode,l.authToken,!!s);return{data:g,extensions:h}}}else return{data:null,extensions:h}}catch(l){if(l.errors)return l;throw l}}function El(e,t,n,r){const{name:i}=n;return s=>{const a=Mt(t,i,r,s),c=Ft(n,r,s,t),u=et(e,s),l=tt(e,s==null?void 0:s.headers);return e.graphql({...u,query:a,variables:c},l).pipe(Ii(f=>{const[h]=Object.keys(f.data),p=f.data[h],[m]=Ze(e,i,[p],t,u.authMode,u.authToken);return m}))}}function Tl(e){const{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}function Sl(e,t,n){const r=Object.fromEntries(n.map(i=>[i,e[i]]));for(let i=0;i<t.length;i++)if(Object.keys(r).every(o=>r[o]===t[i][o]))return i;return-1}function bl(e,t){const{name:n}=t;return i=>new W(o=>{const s=[],a=[];let c=(...p)=>a.push(...p);const u=e[n].onCreate(i).subscribe({next(p){c({item:p,type:"create"})},error(p){o.error({type:"onCreate",error:p})}}),l=e[n].onUpdate(i).subscribe({next(p){c({item:p,type:"update"})},error(p){o.error({type:"onUpdate",error:p})}}),d=e[n].onDelete(i).subscribe({next(p){c({item:p,type:"delete"})},error(p){o.error({type:"onDelete",error:p})}});function f(p){for(const m of p){const g=Sl(m.item,s,h);switch(m.type){case"create":g<0&&s.push(m.item);break;case"update":g>=0&&(s[g]=m.item);break;case"delete":g>=0&&s.splice(g,1);break;default:console.error("Unrecognized message in observeQuery.",m)}}o.next({items:s,isSynced:!0})}const h=Tl(t);return(async()=>{let p=!0,m=null;for(;!o.closed&&(p||m);){p=!1;const{data:g,errors:v,nextToken:w}=await e[n].list({...i,nextToken:m});m=w,s.push(...g);const b=a.length===0&&m==null;if(o.next({items:s,isSynced:b}),Array.isArray(v))for(const O of v)o.error(O)}a.length>0&&f(a),c=(...g)=>(f(g),s.length)})(),()=>{u.unsubscribe(),l.unsubscribe(),d.unsubscribe()}})}const Il=e=>{var t,n,r;return e.type==="key"&&((t=e.properties)==null?void 0:t.name)&&((n=e.properties)==null?void 0:n.queryField)&&((r=e.properties)==null?void 0:r.fields.length)>0},wl=e=>{var n;return((n=e.attributes)==null?void 0:n.filter(Il).map(r=>{const i=r.properties.queryField,[o,...s]=r.properties.fields;return{queryField:i,pk:o,sk:s}}))||[]};function oo(e,t){const n={},r=t.modelIntrospection;if(!r)return{};const i=["ONCREATE","ONUPDATE","ONDELETE"];for(const o of Object.values(r.models)){const{name:s}=o;n[s]={},Object.entries(no).forEach(([c,{operationPrefix:u}])=>{const l=c;l==="LIST"?n[s][u]=pl(e,r,o):i.includes(l)?n[s][u]=El(e,r,o,l):l==="OBSERVE_QUERY"?n[s][u]=bl(n,o):n[s][u]=vl(e,r,o,l)});const a=wl(o);for(const c of a)n[s][c.queryField]=yl(e,r,o,c)}return n}function so(e){return e!==void 0}function Al(e,t,n,r,i){return i?async(a,c,u)=>Kr(e,t,n,r,c,u,a):async(a,c)=>Kr(e,t,n,r,a,c)}function fe(e,t){return typeof e[t]=="string"}function _l(e){const t=Object.entries(e.arguments).map(([n,r])=>{const i=r.type+(r.isRequired?"!":""),o=r.isArray?`[${i}]${r.isArrayNullable?"":"!"}`:i;return`$${n}: ${o}`}).join(", ");return t.length>0?`(${t})`:""}function Nl(e){const t=Object.entries(e.arguments).map(([n,r])=>`${n}: $${n}`).join(", ");return t.length>0?`(${t})`:""}function $r(e){return Object.values(e.fields).filter(t=>fe(t,"type")||fe(t.type,"nonModel")||fe(t.type,"enum")).map(t=>t.name).join(" ")}function Ol(e,t){if(fe(t,"type")||fe(t.type,"enum"))return"";if(fe(t.type,"nonModel")){const n=e.nonModels[t.type.nonModel];return`{${$r(n)}}`}else if(fe(t.type,"model")){const n=e.models[t.type.model];return`{${$r(n)}}`}else return""}function kl(e,t={}){const n={};for(const r of Object.values(e.arguments))if(typeof t[r.name]<"u")n[r.name]=t[r.name];else if(r.isRequired)throw new Error(`${e.name} requires arguments '${r.name}'`);return n}async function Kr(e,t,n,r,i,o,s){const{name:a}=r,c=et(e,o),u=tt(e,o==null?void 0:o.headers),l=_l(r),d=Nl(r),f=Ol(t,r),h=fe(r.type,"model")?r.type.model:void 0,p=`
		${n.toLocaleLowerCase()}${l} {
			${a}${d} ${f}
		}
	`,m=kl(r,i);try{const{data:g,extensions:v}=s?await e.graphql(s,{...c,query:p,variables:m},u):await e.graphql({...c,query:p,variables:m},u);if(g){const[w]=Object.keys(g),b=Ne(g)[w],[O]=h?Ze(e,h,[b],t,c.authMode,c.authToken,!!s):[b];return{data:O,extensions:v}}else return{data:null,extensions:v}}catch(g){if(g.errors)return g;throw g}}const Cl={queries:"query",mutations:"mutation"};function ao(e,t,n){if(!t)return{};const r=t.modelIntrospection;if(!r)return{};const i=r[n];if(!i)return{};const o={},s=e[_n]===null;for(const a of Object.values(i))o[a.name]=Al(e,r,Cl[n],a,s);return o}function co(e,t){return ao(e,t,"mutations")}function uo(e,t){return ao(e,t,"queries")}function xl(e){return e.event==="configure"}function Dl(e){var r;const t={[_n]:e.amplify,[Nn]:e.authMode,[On]:e.authToken,[Yi]:e.headers,graphql:ol,cancel:sl,isCancelError:al,models:lt,enums:lt,queries:lt,mutations:lt},n=(r=e.amplify.getConfig().API)==null?void 0:r.GraphQL;return so(n)?(t.models=oo(t,n),t.enums=eo(n),t.queries=uo(t,n),t.mutations=co(t,n)):Rl(t),t}const Rl=e=>{qe.listen("core",t=>{var r;if(!xl(t.payload))return;const n=(r=t.payload.data.API)==null?void 0:r.GraphQL;so(n)&&(e.models=oo(e,n),e.enums=eo(n),e.queries=uo(e,n),e.mutations=co(e,n))})},lt=new Proxy({},{get(){throw new Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});function Pl(e={}){return Dl({...e,amplify:oe})}const Ll=`
  mutation StartJob($id: String!) {
    startJob(id: $id) {
      id
      status
      message
      createdAt
      updatedAt
      __typename
    }
  }
`,Ml=`
  subscription SubscribeStartJob($id: String!) {
    subscribeStartJob(id: $id) {
      id
      status
      message
      createdAt
      updatedAt
      __typename
    }
  }
`,Fl=`
  subscription SubscribeCompleteJob($id: String!) {
    subscribeCompleteJob(id: $id) {
      id
      status
      message
      createdAt
      updatedAt
      __typename
    }
  }
`,lo="cognito-idp",Ul=({region:e})=>{var i;const t=(i=oe.getConfig().Auth)==null?void 0:i.Cognito,n=t==null?void 0:t.userPoolEndpoint,r=new ge(`https://${lo}.${e}.${Ri(e)}`);return{url:n?new ge(n):r}},$l=()=>(e,t)=>async function(r){return r.headers["cache-control"]="no-store",e(r)},Kl=Rt(Sn,[$l]),Vl={service:lo,endpointResolver:Ul,retryDecider:In(Oe),computeDelay:bn,userAgentValue:Xe(),cache:"no-store"},jl=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),Bl=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});class M extends X{constructor(t){super(t),this.constructor=M,Object.setPrototypeOf(this,M.prototype)}}function fo(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new M({name:St.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const Gl=e=>(t,n)=>{const r=jl(e),i=JSON.stringify(t);return Bl(n,r,i)},ql=()=>async e=>{if(e.statusCode>=300){const t=await Oe(e);throw fo(t),new M({name:t.name,message:t.message})}else return await Dt(e)},Wl=Tn(Kl,Gl("InitiateAuth"),ql(),Vl);function Hl(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new M({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function pn(e){if(!e||!e.includes(":"))throw new M({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}const ho="UserUnAuthenticatedException",Ql="InvalidRedirectException";new M({name:Ql,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});const zl="InvalidOriginException";new M({name:zl,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});const Jl="TokenRefreshException";function Yl(e){if(!e||!e.idToken)throw new M({name:ho,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const Xl=new M({name:Jl,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Zl=new M({name:ho,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function ed(e){if(nd(e))throw Xl;if(!td(e))throw Zl}function po(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function td(e){return po(e)&&(e==null?void 0:e.refreshToken)}function nd(e){return po(e)&&!(e!=null&&e.refreshToken)}function rd({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window>"u")return;const r=window.AmazonCognitoAdvancedSecurityData;if(typeof r>"u")return;const i=r.getData(e,t,n);return i?{EncodedData:i}:{}}const id=async({tokens:e,authConfig:t,username:n})=>{var f,h;bt(t==null?void 0:t.Cognito);const r=Hl(t.Cognito.userPoolId);ed(e);const i=e.refreshToken,o={REFRESH_TOKEN:i};(f=e.deviceMetadata)!=null&&f.deviceKey&&(o.DEVICE_KEY=e.deviceMetadata.deviceKey);const s=rd({username:n,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:a}=await Wl({region:r},{ClientId:(h=t==null?void 0:t.Cognito)==null?void 0:h.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,UserContextData:s}),c=We((a==null?void 0:a.AccessToken)??""),u=a!=null&&a.IdToken?We(a.IdToken):void 0,l=c.payload.iat;if(!l)throw new M({name:"iatNotFoundException",message:"iat not found in access token"});const d=l*1e3-new Date().getTime();return{accessToken:c,idToken:u,clockDrift:d,refreshToken:i,username:n}},od=Su(id),sd={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};var Nt;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(Nt||(Nt={}));const ad={[Nt.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},cd=Ai(ad);class ud{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new M({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}async loadTokens(){try{const t=await this.getAuthKeys(),n=await this.getKeyValueStorage().getItem(t.accessToken);if(!n)throw new M({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=We(n),i=await this.getKeyValueStorage().getItem(t.idToken),o=i?We(i):void 0,s=await this.getKeyValueStorage().getItem(t.refreshToken)??void 0,a=await this.getKeyValueStorage().getItem(t.clockDrift)??"0",c=Number.parseInt(a),u=await this.getKeyValueStorage().getItem(t.signInDetails),l={accessToken:r,idToken:o,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:c,username:await this.getLastAuthUser()};return u&&(l.signInDetails=JSON.parse(u)),l}catch{return null}}async storeTokens(t){cd(t!==void 0,Nt.InvalidAuthTokens),await this.clearTokens();const n=t.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const r=await this.getAuthKeys();await this.getKeyValueStorage().setItem(r.accessToken,t.accessToken.toString()),t.idToken&&await this.getKeyValueStorage().setItem(r.idToken,t.idToken.toString()),t.refreshToken&&await this.getKeyValueStorage().setItem(r.refreshToken,t.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(r.deviceKey,t.deviceMetadata.deviceKey),t.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(r.deviceGroupKey,t.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(r.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails&&await this.getKeyValueStorage().setItem(r.signInDetails,JSON.stringify(t.signInDetails)),await this.getKeyValueStorage().setItem(r.clockDrift,`${t.clockDrift}`)}async clearTokens(){const t=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(t){const n=await this.getAuthKeys(t),r=await this.getKeyValueStorage().getItem(n.deviceKey),i=await this.getKeyValueStorage().getItem(n.deviceGroupKey),o=await this.getKeyValueStorage().getItem(n.randomPasswordKey);return o?{deviceKey:r??void 0,deviceGroupKey:i??void 0,randomPassword:o}:null}async clearDeviceMetadata(t){const n=await this.getAuthKeys(t);await Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])}async getAuthKeys(t){var r;bt((r=this.authConfig)==null?void 0:r.Cognito);const n=t??await this.getLastAuthUser();return ld(this.name,`${this.authConfig.Cognito.userPoolClientId}.${n}`)}getLastAuthUserKey(){var n;bt((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${t}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}const ld=(e,t)=>yo(sd)(`${e}`,t);function yo(e){const t=Object.values({...e});return(n,r)=>t.reduce((i,o)=>({...i,[o]:`${n}.${r}.${o}`}),{})}class dd{constructor(){this.waitForInflightOAuth=async()=>{}}setAuthConfig(t){this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}setWaitForInflightOAuth(t){this.waitForInflightOAuth=t}getTokenStore(){if(!this.tokenStore)throw new M({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new M({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(t){var s,a,c,u,l;let n;try{bt((s=this.authConfig)==null?void 0:s.Cognito)}catch{return null}await this.waitForInflightOAuth(),n=await this.getTokenStore().loadTokens();const r=await this.getTokenStore().getLastAuthUser();if(n===null)return null;const i=!!(n!=null&&n.idToken)&&or({expiresAt:(((c=(a=n.idToken)==null?void 0:a.payload)==null?void 0:c.exp)??0)*1e3,clockDrift:n.clockDrift??0}),o=or({expiresAt:(((l=(u=n.accessToken)==null?void 0:u.payload)==null?void 0:l.exp)??0)*1e3,clockDrift:n.clockDrift??0});return(t!=null&&t.forceRefresh||i||o)&&(n=await this.refreshTokens({tokens:n,username:r}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}}async refreshTokens({tokens:t,username:n}){try{const r=await this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n});return await this.setTokens({tokens:r}),qe.dispatch("auth",{event:"tokenRefresh"},"Auth",Ge),r}catch(r){return this.handleErrors(r)}}handleErrors(t){if(fo(t),t.message!=="Network error"&&this.clearTokens(),qe.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",Ge),t.name.startsWith("NotAuthorizedException"))return null;throw t}async setTokens({tokens:t}){return this.getTokenStore().storeTokens(t)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}}class fd{constructor(){this.authTokenStore=new ud,this.authTokenStore.setKeyValueStorage(wt),this.tokenOrchestrator=new dd,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(od)}getTokens({forceRefresh:t}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:t})}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setWaitForInflightOAuth(t){this.tokenOrchestrator.setWaitForInflightOAuth(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Le=new fd;Le.tokenOrchestrator;const hd={identityId:"identityId"},pd=new H("DefaultIdentityIdStore");class yd{setAuthConfig(t){vt(t.Cognito),this.authConfig=t,this._authKeys=md("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this.keyValueStorage=t}async loadIdentityId(){var t;vt((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=await this.keyValueStorage.getItem(this._authKeys.identityId);return n?{id:n,type:"guest"}:null}}catch(n){return pd.log("Error getting stored IdentityId.",n),null}}async storeIdentityId(t){var n;vt((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=t.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}const md=(e,t)=>yo(hd)(`com.amplify.${e}`,t);function mo(e){const t=We(e).payload.iss,n={};if(!t)throw new M({name:"InvalidIdTokenException",message:"Invalid Idtoken."});let r=t.replace(/(^\w+:|^)\/\//,"");return n[r]=e,n}const gd=new H("CognitoIdentityIdProvider");async function vd({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let r=await n.loadIdentityId();if(e){if(r&&r.type==="primary")return r.id;{const i=e.idToken?mo(e.idToken.toString()):{},o=await Vr(i,t);r&&r.id===o&&gd.debug(`The guest identity ${r.id} has become the primary identity.`),r={id:o,type:"primary"}}}else{if(r&&r.type==="guest")return r.id;r={id:await Vr({},t),type:"guest"}}return n.storeIdentityId(r),r.id}async function Vr(e,t){const n=t==null?void 0:t.identityPoolId,r=pn(n),i=(await Oc({region:r},{IdentityPoolId:n,Logins:e})).IdentityId;if(!i)throw new M({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i}const dt=new H("CognitoCredentialsProvider"),jr=50*60*1e3;class Ed{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}async clearCredentialsAndIdentityId(){dt.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){dt.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(t){const n=t.authenticated,r=t.tokens,i=t.authConfig;try{vt(i==null?void 0:i.Cognito)}catch{return}if(!n&&!i.Cognito.allowGuestAccess)return;const o=t.forceRefresh,s=this.hasTokenChanged(r),a=await vd({tokens:r,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return(o||s)&&this.clearCredentials(),n?(Yl(r),this.credsForOIDCTokens(i.Cognito,r,a)):this.getGuestCredentials(a,i.Cognito)}async getGuestCredentials(t,n){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return dt.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const r=pn(n.identityPoolId),i=await Ir({region:r},{IdentityId:t});if(i.Credentials&&i.Credentials.AccessKeyId&&i.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+jr;const o={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t},s=i.IdentityId;return s&&(o.identityId=s,this._identityIdStore.storeIdentityId({id:s,type:"guest"})),this._credentialsAndIdentityId={...o,isAuthenticatedCreds:!1},o}else throw new M({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(t,n,r){var a;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return dt.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const i=n.idToken?mo(n.idToken.toString()):{},o=pn(t.identityPoolId),s=await Ir({region:o},{IdentityId:r,Logins:i});if(s.Credentials&&s.Credentials.AccessKeyId&&s.Credentials.SecretKey){const c={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:r};this._credentialsAndIdentityId={...c,isAuthenticatedCreds:!0,associatedIdToken:(a=n.idToken)==null?void 0:a.toString()},this._nextCredentialsRefresh=new Date().getTime()+jr;const u=s.IdentityId;return u&&(c.identityId=u,this._identityIdStore.storeIdentityId({id:u,type:"primary"})),c}else throw new M({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,r;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((r=t.idToken)==null?void 0:r.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const Td=new Ed(new yd(wt)),go={configure(e,t){let n;if(Object.keys(e).some(r=>r.startsWith("aws_"))?n=Ni(e):n=e,!n.Auth){oe.configure(n,t);return}if(t!=null&&t.Auth){oe.configure(n,t);return}if(!oe.libraryOptions.Auth){Le.setAuthConfig(n.Auth),Le.setKeyValueStorage(t!=null&&t.ssr?new wr({sameSite:"lax"}):wt),oe.configure(n,{...t,Auth:{tokenProvider:Le,credentialsProvider:Td}});return}if(t){t.ssr!==void 0&&Le.setKeyValueStorage(t.ssr?new wr({sameSite:"lax"}):wt),oe.configure(n,{Auth:oe.libraryOptions.Auth,...t});return}oe.configure(n)},getConfig(){return oe.getConfig()}},Sd="us-west-2",bd="https://h7w44o6b3bf3fczmbyrpl5gukq.appsync-api.us-west-2.amazonaws.com/graphql",Id="us-west-2",wd="AWS_LAMBDA",vo={aws_project_region:Sd,aws_appsync_graphqlEndpoint:bd,aws_appsync_region:Id,aws_appsync_authenticationType:wd};function Br(e,t,n){const r=e.slice();return r[8]=t[n],r}function Gr(e){let t,n=Gn(e[1]),r=[];for(let i=0;i<n.length;i+=1)r[i]=qr(Br(e,n,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();t=ko()},m(i,o){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(i,o);ue(i,t,o)},p(i,o){if(o&2){n=Gn(i[1]);let s;for(s=0;s<n.length;s+=1){const a=Br(i,n,s);r[s]?r[s].p(a,o):(r[s]=qr(a),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(i){i&&ae(t),Oo(r,i)}}}function qr(e){let t,n=e[8].id+"",r,i,o=e[8].status+"",s,a,c,u,l,d=e[8].message+"",f,h,p;return{c(){t=q("b"),r=Te(n),i=Te(" - "),s=Te(o),a=ie(),c=q("br"),u=ie(),l=q("blockquote"),f=Te(d),h=ie(),p=q("br")},m(m,g){ue(m,t,g),L(t,r),L(t,i),L(t,s),ue(m,a,g),ue(m,c,g),ue(m,u,g),ue(m,l,g),L(l,f),ue(m,h,g),ue(m,p,g)},p(m,g){g&2&&n!==(n=m[8].id+"")&&Kt(r,n),g&2&&o!==(o=m[8].status+"")&&Kt(s,o),g&2&&d!==(d=m[8].message+"")&&Kt(f,d)},d(m){m&&(ae(t),ae(a),ae(c),ae(u),ae(l),ae(h),ae(p))}}}function Ad(e){let t,n,r,i,o,s,a,c,u,l,d,f,h,p,m,g,v,w,b,O,I=e[1]&&Gr(e);return{c(){t=q("main"),n=q("div"),r=q("h1"),r.textContent="Job Tracker",i=ie(),o=q("form"),s=q("label"),s.textContent="Job ID",a=ie(),c=q("input"),u=ie(),l=q("label"),l.textContent="Token",d=ie(),f=q("input"),h=ie(),p=q("button"),p.textContent="Start Job",m=ie(),g=ie(),v=q("br"),w=ie(),I&&I.c(),se(s,"type","text"),se(s,"for","s1-2"),se(c,"type","text"),se(c,"id","job_id"),se(l,"type","text"),se(l,"for","s1-2"),se(f,"type","text"),se(f,"id","auth_token"),se(p,"type","submit"),se(t,"class","svelte-n88iv8")},m(T,A){ue(T,t,A),L(t,n),L(n,r),L(n,i),L(n,o),L(o,s),L(o,a),L(o,c),nt(c,e[0]),L(o,u),L(o,l),L(o,d),L(o,f),nt(f,e[2]),L(o,h),L(o,p),L(o,m),L(n,g),L(n,v),L(n,w),I&&I.m(n,null),b||(O=[$t(c,"input",e[4]),$t(f,"input",e[5]),$t(o,"submit",Co(e[3]))],b=!0)},p(T,[A]){A&1&&c.value!==T[0]&&nt(c,T[0]),A&4&&f.value!==T[2]&&nt(f,T[2]),T[1]?I?I.p(T,A):(I=Gr(T),I.c(),I.m(n,null)):I&&(I.d(1),I=null)},i:$e,o:$e,d(T){T&&ae(t),I&&I.d(),b=!1,Je(O)}}}function _d(e,t,n){let r,i=[],o="",s;Ro(async()=>{let l=go.configure(vo);console.log("conf",l),s=Pl()});async function a(){console.log("subscribing startJob: ",r),await s.graphql({query:Ml,variables:{id:r},authToken:o}).subscribe({next:({data:d})=>{console.log("got data: ",d),console.log(d.subscribeStartJob),i.push(d.subscribeStartJob),n(1,i)},error:d=>console.error(d)}),console.log("subscribing completeJob: ",r),await s.graphql({query:Fl,variables:{id:r},authToken:o}).subscribe({next:({data:d})=>{console.log("got data: ",d),console.log(d.subscribeCompleteJob),i.push(d.subscribeCompleteJob),n(1,i)},error:d=>console.error(d)}),console.log("starting job: ",r);const l=await s.graphql({query:Ll,variables:{id:r},authToken:o});console.log(l)}function c(){r=this.value,n(0,r)}function u(){o=this.value,n(2,o)}return[r,i,o,a,c,u]}class Nd extends Go{constructor(t){super(),Bo(this,t,_d,Ad,_o,{})}}go.configure(vo);new Nd({target:document.body});
